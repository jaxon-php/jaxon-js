var jaxon={debug:{verbose:{}},ajax:{},tools:{},cmd:{}};jaxon.config={commonHeaders:{"If-Modified-Since":"Sat, 1 Jan 2000 00:00:00 GMT"},postHeaders:{},getHeaders:{},waitCursor:!1,statusMessages:!1,baseDocument:document,requestURI:document.URL,defaultMode:"asynchronous",defaultHttpVersion:"HTTP/1.1",defaultContentType:"application/x-www-form-urlencoded",defaultResponseDelayTime:1e3,convertResponseToJson:!0,defaultExpirationTime:1e4,defaultMethod:"POST",defaultRetry:5,defaultReturnValue:!1,maxObjectDepth:20,maxObjectSize:2e3,commandQueueSize:1e3,requestQueueSize:1e3},jaxon.config.status={update:function(){return{onRequest:function(){window.status="Sending Request..."},onWaiting:function(){window.status="Waiting for Response..."},onProcessing:function(){window.status="Processing..."},onComplete:function(){window.status="Done."}}},dontUpdate:function(){return{onRequest:function(){},onWaiting:function(){},onProcessing:function(){},onComplete:function(){}}}},jaxon.config.cursor={update:function(){return{onWaiting:function(){jaxon.config.baseDocument.body&&(jaxon.config.baseDocument.body.style.cursor="wait")},onComplete:function(){jaxon.config.baseDocument.body.style.cursor="auto"}}},dontUpdate:function(){return{onWaiting:function(){},onComplete:function(){}}}},jaxon.tools.array={is_in:function(e,n){return e.find((e=>e==n))}},jaxon.tools.dom={$:function(e){if(!e)return null;if("string"!=typeof e)return e;const n=jaxon.config.baseDocument,t=n.getElementById(e);return t||(n.all?n.all[e]:t)},_getWorkspace:function(){const e=jaxon.$("jaxon_temp_workspace");if(e)return e;const n=jaxon.config.baseDocument;if(!n.body)return null;const t=n.createElement("div");return t.setAttribute("id","jaxon_temp_workspace"),t.style.display="none",t.style.visibility="hidden",n.body.appendChild(t),t},getBrowserHTML:function(e){const n=jaxon.tools.dom._getWorkspace();n.innerHTML=e;const t=n.innerHTML;return n.innerHTML="",t},willChange:function(e,n,t){return"string"==typeof e&&(e=jaxon.$(e)),!!e&&t!=e[n]},findFunction:function(e){const n=e.split("."),t=n.length;let o=window;for(let e=0;e<t&&o;e++)if(o=o[n[e]],!o)return null;return o},getInnerObject:function(e,n){const t=n.split(".");n=t.pop();for(let n=0,o=t.length;n<o;n++){const o=t[n];if(!(e=e["css"===o?"style":o]))return[null,null]}return[e,n]},createFunction(e,n){if(!e)return;const t=void 0===n,o="jaxon_cmd_script_"+(void 0===n?"delegate_call":n.toLowerCase().replaceAll(".","_"));void 0===n&&(n="jaxon.cmd.script.context.delegateCall"),jaxon.cmd.node.remove(o);const a=jaxon.config.baseDocument.createElement("script");return a.setAttribute("id",o),a.textContent=`\n    ${n} = ${e}\n`,jaxon.config.baseDocument.body.appendChild(a),t&&jaxon.cmd.node.remove(o),!0}},jaxon.tools.form={getValues:function(e){const n=arguments.length>1&&1==arguments[1],t=arguments.length>2?arguments[2]:"";"string"==typeof e&&(e=jaxon.$(e));const o={};return e&&e.childNodes&&jaxon.tools.form._getValues(o,e.childNodes,n,t),o},_getValues:function(e,n,t,o){const a=n.length;for(let r=0;r<a;++r){const a=n[r];void 0!==a.childNodes&&"select-one"!==a.type&&"select-multiple"!==a.type&&jaxon.tools.form._getValues(e,a.childNodes,t,o),jaxon.tools.form._getValue(e,a,t,o)}},_getValue:function(e,n,t,o){if(!n.name)return;if("PARAM"==n.tagName)return;if(n.disabled&&1==n.disabled&&0==t)return;if(o!=n.name.substring(0,o.length))return;if(n.type){if(("radio"==n.type||"checkbox"==n.type)&&0==n.checked)return;if("file"==n.type)return}const a=n.name;let r=[];if("select-multiple"==n.type){const e=n.length;for(let t=0;t<e;++t){const e=n.options[t];1==e.selected&&r.push(e.value)}}else r=n.value;if(0<=a.indexOf("[")){let t=a,o=t.substr(0,t.indexOf("[")),s=t.substr(t.indexOf("["));void 0===e[o]&&(e[o]={});let c=e;for(;0!=s.length;){const e=s.substr(0,s.indexOf("]")+1),t=o,a=c;if(s=s.substr(s.indexOf("]")+1),c=c[o],o=e.substr(1,e.length-2),""==o&&("select-multiple"==n.type?(o=t,c=a):o=c.length),void 0===o){o=0;for(let e in a[t])o++}void 0===c[o]&&(c[o]={})}c[o]=r}else e[a]=r}},jaxon.tools.queue={create:function(e){return{start:0,count:0,size:e,end:0,elements:[],timeout:null}},empty:function(e){return e.count<=0},full:function(e){return e.count>=e.size},push:function(e,n){if(jaxon.tools.queue.full(e))throw{code:10003};return e.elements[e.end]=n,++e.end>=e.size&&(e.end=0),++e.count},pushFront:function(e,n){if(jaxon.tools.queue.full(e))throw{code:10003};return jaxon.tools.queue.empty(e)?jaxon.tools.queue.push(e,n):(--e.start<0&&(e.start=e.size-1),e.elements[e.start]=n,++e.count)},pop:function(e){if(jaxon.tools.queue.empty(e))return null;let n=e.elements[e.start];return delete e.elements[e.start],++e.start>=e.size&&(e.start=0),e.count--,n},peek:function(e){return jaxon.tools.queue.empty(e)?null:e.elements[e.start]}},jaxon.tools.string={doubleQuotes:function(e){return void 0!==e&&e.replace(new RegExp("'","g"),'"')},singleQuotes:function(e){return void 0!==e&&e.replace(new RegExp('"',"g"),"'")},stripOnPrefix:function(e){return 0==(e=e.toLowerCase()).indexOf("on")&&(e=e.replace(/on/,"")),e},addOnPrefix:function(e){return 0!=(e=e.toLowerCase()).indexOf("on")&&(e="on"+e),e}},String.prototype.supplant||(String.prototype.supplant=function(e){return this.replace(/\{([^{}]*)\}/g,(function(n,t){const o=e[t];return"string"==typeof o||"number"==typeof o?o:n}))}),jaxon.tools.upload={_initialize:function(e){if(!e.upload)return!1;e.upload={id:e.upload,input:null,form:null};const n=jaxon.tools.dom.$(e.upload.id);return n?"file"!==n.type?(console.log("The upload input field with id "+e.upload.id+" is not of type file"),!1):0===n.files.length?(console.log("There is no file selected for upload in input field with id "+e.upload.id),!1):void 0===n.name?(console.log("The upload input field with id "+e.upload.id+" has no name attribute"),!1):(e.upload.input=n,e.upload.form=n.form,!0):(console.log("Unable to find input field for file upload with id "+e.upload.id),!1)},initialize:function(e){jaxon.tools.upload._initialize(e)||(e.postHeaders["content-type"]=e.contentType)}},jaxon.cmd.delay={popAsyncRequest:function(e){return jaxon.tools.queue.empty(e)||"synchronous"===jaxon.tools.queue.peek(e).mode?null:jaxon.tools.queue.pop(e)},retry:function(e,n){let t=e.retries;if(t){if(--t,1>t)return!1}else t=n;return e.retries=t,e.requeue=!0,!0},setWakeup:function(e,n){null!==e.timeout&&(clearTimeout(e.timeout),e.timeout=null),e.timout=setTimeout((function(){jaxon.ajax.response.process(e)}),n)},confirmCallback:function(e,n,t){if(!0===t)for(;n>0&&e.response.count>1&&null!==jaxon.tools.queue.pop(e.response);)--n;!0!==e.requeue?jaxon.ajax.response.process(e.response):jaxon.cmd.delay.setWakeup(e.response,30)},confirm:function(e,n,t){return e.requeue=!0,jaxon.ajax.message.confirm(t,"",(function(){jaxon.cmd.delay.confirmCallback(e,n,!1)}),(function(){jaxon.cmd.delay.confirmCallback(e,n,!0)})),e.requeue=!1,!1}},jaxon.cmd.event={setEvent:function(e){e.fullName="setEvent";const n=jaxon.tools.string.addOnPrefix(e.prop),t=jaxon.tools.string.doubleQuotes(e.data),o=jaxon.$(e.id);return jaxon.tools.dom.createFunction(`(e) => { ${t} }`),o[n]=jaxon.cmd.script.context.delegateCall,!0},addHandler:function(e){e.fullName="addHandler";const n=e.data,t=jaxon.cmd.event.getName(e.prop),o=jaxon.$(e.id);return jaxon.cmd.event._addHandler(o,t,n)},removeHandler:function(e){e.fullName="removeHandler";const n=e.data,t=jaxon.cmd.event.getName(e.prop),o=jaxon.$(e.id);return jaxon.cmd.event._removeHandler(o,t,n)}},window.addEventListener?(jaxon.cmd.event.getName=function(e){return jaxon.tools.string.stripOnPrefix(e)},jaxon.cmd.event._addHandler=function(e,n,t){return e.addEventListener(n,jaxon.tools.dom.findFunction(t),!1),!0},jaxon.cmd.event._removeHandler=function(e,n,t){return e.removeEventListener(n,jaxon.tools.dom.findFunction(t),!1),!0}):(jaxon.cmd.event.getName=function(e){return jaxon.tools.string.addOnPrefix(e)},jaxon.cmd.event._addHandler=function(e,n,t){return e.attachEvent(n,jaxon.tools.dom.findFunction(t)),!0},jaxon.cmd.event._removeHandler=function(e,n,t){return e.detachEvent(n,jaxon.tools.dom.findFunction(t)),!0}),jaxon.cmd.form={getInput:function(e,n,t){return void 0===window.addEventListener?jaxon.cmd.form.getInput=function(e,n,t){return jaxon.config.baseDocument.createElement('<input type="'+e+'" name="'+n+'" id="'+t+'">')}:jaxon.cmd.form.getInput=function(e,n,t){const o=jaxon.config.baseDocument.createElement("input");return o.setAttribute("type",e),o.setAttribute("name",n),o.setAttribute("id",t),o},jaxon.cmd.form.getInput(e,n,t)},createInput:function(e){e.fullName="createInput";const n="string"==typeof e.id?jaxon.$(e.id):e.id,t=e.type,o=e.data,a=e.prop,r=jaxon.cmd.form.getInput(t,o,a);return n&&r&&n.appendChild(r),!0},insertInput:function(e){e.fullName="insertInput";const n="string"==typeof e.id?jaxon.$(e.id):e.id,t=e.type,o=e.data,a=e.prop,r=jaxon.cmd.form.getInput(t,o,a);return r&&n&&n.parentNode&&n.parentNode.insertBefore(r,n),!0},insertInputAfter:function(e){e.fullName="insertInputAfter";const n="string"==typeof e.id?jaxon.$(e.id):e.id,t=e.type,o=e.data,a=e.prop,r=jaxon.cmd.form.getInput(t,o,a);return r&&n&&n.parentNode&&n.parentNode.insertBefore(r,n.nextSibling),!0}},jaxon.cmd.node={assign:function(e,n,t){if(e=jaxon.$(e),"innerHTML"===n)return e.innerHTML=t,!0;if("outerHTML"===n)return e.outerHTML=t,!0;const[o,a]=jaxon.tools.dom.getInnerObject(e,n);return!o||(o[a]=t,!0)},append:function(e,n,t){if(e=jaxon.$(e),"innerHTML"===n)return e.innerHTML=e.innerHTML+t,!0;if("outerHTML"===n)return e.outerHTML=e.outerHTML+t,!0;const[o,a]=jaxon.tools.dom.getInnerObject(e,n);return!o||(o[a]=o[a]+t,!0)},prepend:function(e,n,t){if(e=jaxon.$(e),"innerHTML"===n)return e.innerHTML=t+e.innerHTML,!0;if("outerHTML"===n)return e.outerHTML=t+e.outerHTML,!0;const[o,a]=jaxon.tools.dom.getInnerObject(e,n);return!o||(o[a]=t+o[a],!0)},replace:function(e,n,t){const o=t.r,a="innerHTML"===n?jaxon.tools.dom.getBrowserHTML(t.s):t.s;e=jaxon.$(e);const[r,s]=jaxon.tools.dom.getInnerObject(e,n);if(!r)return!0;let c=r[s],u=!1;"function"==typeof c&&(c=c.join(""),u=!0);let i=c.indexOf(a);if(i>-1){let t=[];for(;i>-1;){const e=i+a.length;t.push(c.substr(0,i)),t.push(o),c=c.substr(e,c.length-e),i=c.indexOf(a)}t.push(c),t=t.join(""),(u||jaxon.tools.dom.willChange(e,n,t))&&(r[s]=t)}return!0},remove:function(e){return(e=jaxon.$(e))&&e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e),!0},create:function(e,n,t){if(!(e=jaxon.$(e)))return!0;const o=jaxon.config.baseDocument.createElement(n);return o.setAttribute("id",t),e.appendChild(o),!0},insert:function(e,n,t){if(!(e=jaxon.$(e))||!e.parentNode)return!0;const o=jaxon.config.baseDocument.createElement(n);return o.setAttribute("id",t),e.parentNode.insertBefore(o,e),!0},insertAfter:function(e,n,t){if(!(e=jaxon.$(e))||!e.parentNode)return!0;const o=jaxon.config.baseDocument.createElement(n);return o.setAttribute("id",t),e.parentNode.insertBefore(o,e.nextSibling),!0},contextAssign:function(e){e.fullName="context assign";const[n,t]=jaxon.tools.dom.getInnerObject(this,e.prop);return!n||(n[t]=e.data,!0)},contextAppend:function(e){e.fullName="context append";const[n,t]=jaxon.tools.dom.getInnerObject(this,e.prop);return!n||(n[t]=n[t]+e.data,!0)},contextPrepend:function(e){e.fullName="context prepend";const[n,t]=jaxon.tools.dom.getInnerObject(this,e.prop);return!n||(n[t]=e.data+n[t],!0)}},jaxon.cmd.script={includeScriptOnce:function(e){e.fullName="includeScriptOnce";const n=e.data;return!!jaxon.config.baseDocument.getElementsByTagName("script").find((e=>e.src&&e.src.indexOf(n)>=0))||jaxon.cmd.script.includeScript(e)},includeScript:function(e){e.fullName="includeScript";const n=jaxon.config.baseDocument,t=n.getElementsByTagName("head"),o=n.createElement("script");return o.src=e.data,o.type=e.type||"text/javascript",e.elm_id&&o.setAttribute("id",e.elm_id),t[0].appendChild(o),!0},removeScript:function(e){e.fullName="removeScript";const n=e.data;return!jaxon.config.baseDocument.getElementsByTagName("script").find((e=>e.src&&e.src.indexOf(n)>=0))||(e.unld&&jaxon.cmd.script.execute({data:e.unld,context:window}),script.parentNode.removeChild(script),!0)},sleep:function(e){return e.fullName="sleep",!jaxon.cmd.delay.retry(e,e.prop)||(jaxon.cmd.delay.setWakeup(e.response,100),!1)},alert:function(e){return e.fullName="alert",jaxon.ajax.message.info(e.data),!0},confirm:function(e){return e.fullName="confirm",jaxon.cmd.delay.confirm(e,e.count,e.data),!1},call:function(e){e.fullName="call js function",jaxon.cmd.script.context=e.context??{};const n=jaxon.tools.dom.findFunction(e.func);return!n||(n.apply(jaxon.cmd.script.context,e.data),!0)},execute:function(e){e.fullName="execute Javascript",jaxon.cmd.script.context=e.context??{};const n=`() => {\n    ${e.data}\n}`;return jaxon.tools.dom.createFunction(n),jaxon.cmd.script.context.delegateCall(),!0},waitFor:function(e){e.fullName="waitFor",jaxon.cmd.script.context=e.context??{};try{const n=`() => {\n    return (${e.data});\n}`;jaxon.tools.dom.createFunction(n);if(!jaxon.cmd.script.context.delegateCall()&&jaxon.cmd.delay.retry(e,e.prop))return jaxon.cmd.delay.setWakeup(e.response,100),!1}catch(e){}return!0},getParameters:function(e){return void 0===e?"":Array.isArray(e)?e.join(", "):"object"==typeof e?e.values().join(", "):e},setFunction:function(e){e.fullName="setFunction";const n=`(${jaxon.cmd.script.getParameters(e.prop)}) => {\n    ${e.data}\n}`;return jaxon.tools.dom.createFunction(n,e.func),!0},wrapped:{},wrapFunction:function(e){e.fullName="wrapFunction",jaxon.cmd.script.context=e.context??{};const n=jaxon.tools.dom.findFunction(e.func);if(!n)return!0;const t=e.func.toLowerCase().replaceAll(".","_");jaxon.cmd.script.wrapped[t]||(jaxon.cmd.script.wrapped[t]=n);const o=e.type?`let ${e.type} = null;`:"// No return value",a=e.type?`${e.type} = `:"",r=e.type?`return ${e.type};`:"// No return value",s=jaxon.cmd.script.getParameters(e.prop),c=e.data[0],u=e.data[1]||"// No call after",i=`(${s}) => {\n    ${o}\n    ${c}\n\n    const wrappedFuncName = "${e.func}".toLowerCase().replaceAll('.', '_');\n    // Call the wrapped function (saved in jaxon.cmd.script.wrapped) with the same parameters.\n    ${a}jaxon.cmd.script.wrapped[wrappedFuncName](${s});\n    ${u}\n    ${r}\n}`;return jaxon.tools.dom.createFunction(i,e.func),jaxon.cmd.script.context.delegateCall(),!0}},jaxon.cmd.style={add:function(e,n){const t=jaxon.config.baseDocument,o=t.getElementsByTagName("head")[0];if(o.getElementsByTagName("link").find((t=>t.href.indexOf(e)>=0&&t.media==n)))return!0;const a=t.createElement("link");return a.rel="stylesheet",a.type="text/css",a.href=e,a.media=n,o.appendChild(a),!0},remove:function(e,n){const t=jaxon.config.baseDocument.getElementsByTagName("head")[0],o=t.getElementsByTagName("link");return o.filter(link=o[i].href.indexOf(e)>=0&&o[i].media==n).forEach((e=>t.removeChild(e))),!0},waitForCSS:function(e){if(!jaxon.config.baseDocument.styleSheets.map((e=>e.cssRules.length??e.rules.length??0)).every((e=>0!==e)))return!jaxon.cmd.delay.retry(e,e.prop)||(jaxon.cmd.delay.setWakeup(e.response,10),!1)}},jaxon.ajax.callback={create:function(){const e=jaxon.config,n=jaxon.ajax.callback;return{timers:{onResponseDelay:n.setupTimer(arguments.length>0?arguments[0]:e.defaultResponseDelayTime),onExpiration:n.setupTimer(arguments.length>1?arguments[1]:e.defaultExpirationTime)},onPrepare:null,onRequest:null,onResponseDelay:null,onExpiration:null,beforeResponseProcessing:null,onFailure:null,onRedirect:null,onSuccess:null,onComplete:null}},setupTimer:function(e){return{timer:null,delay:e}},clearTimer:function(e,n){void 0!==e.timers?void 0!==e.timers[n]&&clearTimeout(e.timers[n].timer):e.forEach((e=>jaxon.ajax.callback.clearTimer(e,n)))},execute:function(e,n,t){void 0!==e.timers?void 0!==e[n]&&"function"==typeof e[n]&&(void 0!==e.timers[n]?e.timers[n].timer=setTimeout((function(){e[n](t)}),e.timers[n].delay):e[n](t)):e.forEach((e=>jaxon.ajax.callback.execute(e,n,t)))}},jaxon.ajax.handler={handlers:[],execute:function(e){return!jaxon.ajax.handler.isRegistered(e)||(e.id&&(e.target=jaxon.$(e.id)),jaxon.ajax.handler.call(e))},register:function(e,n){jaxon.ajax.handler.handlers[e]=n},unregister:function(e){const n=jaxon.ajax.handler.handlers[e];return delete jaxon.ajax.handler.handlers[e],n},isRegistered:function(e){return!!jaxon.ajax.handler.handlers[e.cmd]},call:function(e){return jaxon.ajax.handler.handlers[e.cmd](e)}},jaxon.ajax.handler.register("rcmplt",(function(e){return jaxon.ajax.response.complete(e.request),!0})),jaxon.ajax.handler.register("css",(function(e){return e.fullName="includeCSS",void 0===e.media&&(e.media="screen"),jaxon.cmd.style.add(e.data,e.media)})),jaxon.ajax.handler.register("rcss",(function(e){return e.fullName="removeCSS",void 0===e.media&&(e.media="screen"),jaxon.cmd.style.remove(e.data,e.media)})),jaxon.ajax.handler.register("wcss",(function(e){return e.fullName="waitForCSS",jaxon.cmd.style.waitForCSS(e)})),jaxon.ajax.handler.register("as",(function(e){e.fullName="assign/clear";try{return jaxon.cmd.node.assign(e.target,e.prop,e.data)}catch(e){}return!0})),jaxon.ajax.handler.register("ap",(function(e){return e.fullName="append",jaxon.cmd.node.append(e.target,e.prop,e.data)})),jaxon.ajax.handler.register("pp",(function(e){return e.fullName="prepend",jaxon.cmd.node.prepend(e.target,e.prop,e.data)})),jaxon.ajax.handler.register("rp",(function(e){return e.fullName="replace",jaxon.cmd.node.replace(e.id,e.prop,e.data)})),jaxon.ajax.handler.register("rm",(function(e){return e.fullName="remove",jaxon.cmd.node.remove(e.id)})),jaxon.ajax.handler.register("ce",(function(e){return e.fullName="create",jaxon.cmd.node.create(e.id,e.data,e.prop)})),jaxon.ajax.handler.register("ie",(function(e){return e.fullName="insert",jaxon.cmd.node.insert(e.id,e.data,e.prop)})),jaxon.ajax.handler.register("ia",(function(e){return e.fullName="insertAfter",jaxon.cmd.node.insertAfter(e.id,e.data,e.prop)})),jaxon.ajax.handler.register("c:as",jaxon.cmd.node.contextAssign),jaxon.ajax.handler.register("c:ap",jaxon.cmd.node.contextAppend),jaxon.ajax.handler.register("c:pp",jaxon.cmd.node.contextPrepend),jaxon.ajax.handler.register("s",jaxon.cmd.script.sleep),jaxon.ajax.handler.register("ino",jaxon.cmd.script.includeScriptOnce),jaxon.ajax.handler.register("in",jaxon.cmd.script.includeScript),jaxon.ajax.handler.register("rjs",jaxon.cmd.script.removeScript),jaxon.ajax.handler.register("wf",jaxon.cmd.script.waitFor),jaxon.ajax.handler.register("js",jaxon.cmd.script.execute),jaxon.ajax.handler.register("jc",jaxon.cmd.script.call),jaxon.ajax.handler.register("sf",jaxon.cmd.script.setFunction),jaxon.ajax.handler.register("wpf",jaxon.cmd.script.wrapFunction),jaxon.ajax.handler.register("al",jaxon.cmd.script.alert),jaxon.ajax.handler.register("cc",jaxon.cmd.script.confirm),jaxon.ajax.handler.register("ci",jaxon.cmd.form.createInput),jaxon.ajax.handler.register("ii",jaxon.cmd.form.insertInput),jaxon.ajax.handler.register("iia",jaxon.cmd.form.insertInputAfter),jaxon.ajax.handler.register("ev",jaxon.cmd.event.setEvent),jaxon.ajax.handler.register("ah",jaxon.cmd.event.addHandler),jaxon.ajax.handler.register("rh",jaxon.cmd.event.removeHandler),jaxon.ajax.handler.register("dbg",(function(e){return e.fullName="debug message",console.log(e.data),!0})),jaxon.ajax.message={success:function(e,n){alert(e)},info:function(e,n){alert(e)},warning:function(e,n){alert(e)},error:function(e,n){alert(e)},confirm:function(e,n,t,o){confirm(e)?t():void 0!==o&&o()}},jaxon.ajax.parameters={bags:{},stringify:function(e){if(null==e)return"*";const n=typeof e;if("object"===n)try{return encodeURIComponent(JSON.stringify(e))}catch(n){e=""}return e=encodeURIComponent(e),"string"===n?"S"+e:"boolean"===n?"B"+e:"number"===n?"N"+e:e},toFormData:function(e){const n=new FormData;n.append("jxnr",e.dNow.getTime());const t=e.upload.input;for(const e of t.files)n.append(t.name,e);for(let t in e.functionName)n.append(t,encodeURIComponent(e.functionName[t]));if(e.parameters)for(const t of e.parameters)n.append("jxnargs[]",jaxon.ajax.parameters.stringify(t));if(e.bags){const t={};for(const n of e.bags)t[n]=jaxon.ajax.parameters.bags[n]??"*";n.append("jxnbags",jaxon.ajax.parameters.stringify(t))}e.requestURI=e.URI,e.requestData=n},toUrlEncoded:function(e){const n=[];n.push("jxnr="+e.dNow.getTime());for(const t in e.functionName)n.push(t+"="+encodeURIComponent(e.functionName[t]));if(e.parameters)for(const t of e.parameters)n.push("jxnargs[]="+jaxon.ajax.parameters.stringify(t));if(e.bags){const t={};for(const n of e.bags)t[n]=jaxon.ajax.parameters.bags[n]??"*";n.push("jxnbags="+jaxon.ajax.parameters.stringify(t))}e.requestURI=e.URI,"GET"===e.method&&(e.requestURI+=-1===e.requestURI.indexOf("?")?"?":"&",e.requestURI+=n.join("&"),n=[]),e.requestData=n.join("&")},process:function(e){const n=e.upload&&e.upload.ajax&&e.upload.input?jaxon.ajax.parameters.toFormData:jaxon.ajax.parameters.toUrlEncoded;e.dNow=new Date,n(e),delete e.dNow}},jaxon.ajax.request={initialize:function(e){const n=jaxon,t=n.config,o=n.ajax.callback.create();["commonHeaders","postHeaders","getHeaders"].forEach((n=>{e[n]={...t[n],...e[n]}}));const a={statusMessages:t.statusMessages,waitCursor:t.waitCursor,mode:t.defaultMode,method:t.defaultMethod,URI:t.requestURI,httpVersion:t.defaultHttpVersion,contentType:t.defaultContentType,convertResponseToJson:t.convertResponseToJson,retry:t.defaultRetry,returnValue:t.defaultReturnValue,maxObjectDepth:t.maxObjectDepth,maxObjectSize:t.maxObjectSize,context:window,upload:!1,aborted:!1};Object.keys(a).forEach((n=>{e[n]=e[n]??a[n]}));if(["onPrepare","onRequest","onResponseDelay","onExpiration","beforeResponseProcessing","onFailure","onRedirect","onSuccess","onComplete"].forEach((n=>{void 0!==e[n]&&(o[n]=e[n],o.hasEvents=!0,delete e[n])})),void 0!==e.callback?(void 0===e.callback.timers&&(e.callback.timers=[]),o.hasEvents&&(e.callback=[e.callback,o])):e.callback=o,e.status=e.statusMessages?t.status.update():t.status.dontUpdate(),e.cursor=e.waitCursor?t.cursor.update():t.cursor.dontUpdate(),e.method=e.method.toUpperCase(),"GET"!==e.method&&(e.method="POST"),e.requestRetry=e.retry,jaxon.tools.upload.initialize(e),void 0===e.URI)throw{code:10005}},prepare:function(e){const n=jaxon,t=n.ajax.callback,o=n.callback,a=e.callback;if(t.execute([o,a],"onPrepare",e),!0===e.aborted)return!1;e.responseHandler=function(n){e.responseContent=n,jaxon.tools.queue.empty(jaxon.cmd.delay.q.send)||"synchronous"===e.mode?jaxon.ajax.response.received(e):jaxon.tools.queue.push(jaxon.cmd.delay.q.recv,e)};const r=jaxon.tools.queue.empty(jaxon.cmd.delay.q.send);return"synchronous"===e.mode?(jaxon.tools.queue.push(jaxon.cmd.delay.q.send,e),jaxon.tools.queue.push(jaxon.cmd.delay.q.recv,e)):r||jaxon.tools.queue.push(jaxon.cmd.delay.q.send,e),r},submit:function(e){e.status.onRequest();const n=jaxon,t=n.ajax.callback,o=n.callback,a=e.callback;t.execute([o,a],"onResponseDelay",e),t.execute([o,a],"onExpiration",e),t.execute([o,a],"onRequest",e),e.cursor.onWaiting(),e.status.onWaiting();const r={...e.commonHeaders,..."POST"===e.method?e.postHeaders:e.getHeaders};return fetch(e.requestURI,{method:e.method,mode:"cors",cache:"no-cache",credentials:"same-origin",redirect:"manual",headers:r,body:e.requestData}).then((n=>(e.response=n,e.convertResponseToJson?n.json():n.text()))).then(e.responseHandler),e.returnValue},abort:function(e){e.aborted=!0,e.request.abort(),jaxon.ajax.response.complete(e)},execute:function(e,n){if(void 0===e)return!1;const t=n??{};t.functionName=e;const o=jaxon;for(o.ajax.request.initialize(t),o.ajax.parameters.process(t);t.requestRetry>0;)try{return o.ajax.request.prepare(t)?(--t.requestRetry,o.ajax.request.submit(t)):null}catch(e){if(jaxon.ajax.callback.execute([jaxon.callback,t.callback],"onFailure",t),0===t.requestRetry)throw e}}},jaxon.ajax.response={received:function(e){const n=jaxon,t=n.ajax.callback,o=n.callback,a=e.callback;if(e.aborted)return null;e.commandQueue=n.tools.queue.create(n.config.commandQueueSize),t.clearTimer([o,a],"onExpiration"),t.clearTimer([o,a],"onResponseDelay"),t.execute([o,a],"beforeResponseProcessing",e);const r=n.ajax.response.processor(e);return r?r(e):(t.execute([o,a],"onFailure",e),void n.ajax.response.complete(e))},complete:function(e){if(jaxon.ajax.callback.execute([jaxon.callback,e.callback],"onComplete",e),e.cursor.onComplete(),e.status.onComplete(),delete e.functionName,delete e.requestURI,delete e.requestData,delete e.requestRetry,delete e.request,delete e["responseHandler "],delete e.responseContent,delete e.response,delete e.sequence,delete e.status,delete e.cursor,"synchronous"===e.mode){const e=jaxon.tools.queue,n=jaxon.cmd.delay;for(e.pop(n.q.send),e.pop(n.q.recv);null!=(recvRequest=n.popAsyncRequest(n.q.recv));)jaxon.ajax.response.received(recvRequest);for(;null!=(nextRequest=n.popAsyncRequest(n.q.send));)jaxon.ajax.request.submit(nextRequest);null!=(nextRequest=e.peek(n.q.send))&&jaxon.ajax.request.submit(nextRequest)}},processCommands:function(e){null!==e.timeout&&(clearTimeout(e.timeout),e.timeout=null);let n=null;for(;null!=(n=jaxon.tools.queue.pop(e));){try{if(!1!==jaxon.ajax.handler.execute(n))continue;return n.requeue||delete n,jaxon.tools.queue.pushFront(e,n),!1}catch(e){console.log(e)}delete n}return!0},queueCommands:function(e){const n=e.responseContent;if(!n||!n.jxnobj)return;e.status.onProcessing();const t=jaxon.tools;n.jxnrv&&(e.returnValue=n.jxnrv),n.debugmsg&&console.log(n.debugmsg),n.jxnobj.forEach((n=>t.queue.push(e.commandQueue,{...n,fullName:"*unknown*",sequence:e.sequence++,response:e.commandQueue,request:e,context:e.context})))},processor:function(e){return void 0!==e.responseProcessor?e.responseProcessor:jaxon.ajax.response.json},json:function(e){const n=jaxon,t=n.tools,o=n.ajax.callback,a=n.callback,r=e.callback;return t.array.is_in(n.ajax.response.successCodes,e.response.status)?(o.execute([a,r],"onSuccess",e),e.sequence=0,n.ajax.response.queueCommands(e),t.queue.push(e.commandQueue,{fullName:"Response Complete",sequence:e.sequence,request:e,context:e.context,cmd:"rcmplt"}),e.commandQueue.timeout||n.ajax.response.processCommands(e.commandQueue),e.returnValue):t.array.is_in(n.ajax.response.redirectCodes,e.response.status)?(o.execute([a,r],"onRedirect",e),window.location=e.request.getResponseHeader("location"),n.ajax.response.complete(e),e.returnValue):t.array.is_in(n.ajax.response.errorsForAlert,e.response.status)?(o.execute([a,r],"onFailure",e),n.ajax.response.complete(e),e.returnValue):e.returnValue},successCodes:["0","200"],errorsForAlert:["400","401","402","403","404","500","501","502","503"],redirectCodes:["301","302","307"]},jaxon.dom={},function(e,n){"use strict";e=e||"docReady",n=n||window;let t=[],o=!1,a=!1;function r(){if(!o){o=!0;for(let e=0;e<t.length;e++)t[e].fn.call(window,t[e].ctx);t=[]}}function s(){"complete"===document.readyState&&r()}n[e]=function(e,n){o?setTimeout((function(){e(n)}),1):(t.push({fn:e,ctx:n}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(r,1):a||(document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):(document.attachEvent("onreadystatechange",s),window.attachEvent("onload",r)),a=!0))}}("ready",jaxon.dom),
/*
    @package jaxon
    @version $Id: jaxon.core.js 327 2007-02-28 16:55:26Z calltoconstruct $
    @copyright Copyright (c) 2005-2007 by Jared White & J. Max Wilson
    @copyright Copyright (c) 2008-2010 by Joseph Woolley, Steffen Konerow, Jared White  & J. Max Wilson
    @license http://www.jaxonproject.org/bsd_license.txt BSD License
*/
jaxon.callback=jaxon.ajax.callback.create(),jaxon.request=jaxon.ajax.request.execute,jaxon.register=jaxon.ajax.handler.register,jaxon.$=jaxon.tools.dom.$,jaxon.getFormValues=jaxon.tools.form.getValues,jaxon.msg=jaxon.ajax.message,jaxon.js=jaxon.cmd.script,jaxon.isLoaded=!0,jaxon.cmd.delay.q={send:jaxon.tools.queue.create(jaxon.config.requestQueueSize),recv:jaxon.tools.queue.create(2*jaxon.config.requestQueueSize)},jaxon.command={handler:{},handler:{register:jaxon.ajax.handler.register},create:function(e,n,t){return{cmd:"*",fullName:"* unknown command name *",sequence:e,request:n,context:t}}};const jxn={$:jaxon.tools.dom.$,getFormValues:jaxon.tools.form.getValues,request:jaxon.request};