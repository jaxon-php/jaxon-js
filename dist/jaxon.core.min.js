const jaxon={config:{},debug:{verbose:{}},ajax:{},tools:{},cmd:{}};jaxon.config.setDefault=function(e,t){void 0===jaxon.config[e]&&(jaxon.config[e]=t)},jaxon.config.setDefault("commonHeaders",{"If-Modified-Since":"Sat, 1 Jan 2000 00:00:00 GMT"}),jaxon.config.setDefault("postHeaders",{}),jaxon.config.setDefault("getHeaders",{}),jaxon.config.setDefault("waitCursor",!1),jaxon.config.setDefault("statusMessages",!1),jaxon.config.setDefault("baseDocument",document),jaxon.config.setDefault("requestURI",jaxon.config.baseDocument.URL),jaxon.config.setDefault("defaultMode","asynchronous"),jaxon.config.setDefault("defaultHttpVersion","HTTP/1.1"),jaxon.config.setDefault("defaultContentType","application/x-www-form-urlencoded"),jaxon.config.setDefault("defaultResponseDelayTime",1e3),jaxon.config.setDefault("defaultExpirationTime",1e4),jaxon.config.setDefault("defaultMethod","POST"),jaxon.config.setDefault("defaultRetry",5),jaxon.config.setDefault("defaultReturnValue",!1),jaxon.config.setDefault("maxObjectDepth",20),jaxon.config.setDefault("maxObjectSize",2e3),jaxon.config.setDefault("responseQueueSize",1e3),jaxon.config.setDefault("requestQueueSize",1e3),jaxon.config.status={update:function(){return{onRequest:function(){window.status="Sending Request..."},onWaiting:function(){window.status="Waiting for Response..."},onProcessing:function(){window.status="Processing..."},onComplete:function(){window.status="Done."}}},dontUpdate:function(){return{onRequest:function(){},onWaiting:function(){},onProcessing:function(){},onComplete:function(){}}}},jaxon.config.cursor={update:function(){return{onWaiting:function(){jaxon.config.baseDocument.body&&(jaxon.config.baseDocument.body.style.cursor="wait")},onComplete:function(){jaxon.config.baseDocument.body.style.cursor="auto"}}},dontUpdate:function(){return{onWaiting:function(){},onComplete:function(){}}}},jaxon.tools.ajax={createRequest:function(){return"undefined"!=typeof XMLHttpRequest?jaxon.tools.ajax.createRequest=function(){return new XMLHttpRequest}:"undefined"!=typeof ActiveXObject?jaxon.tools.ajax.createRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.4.0")}catch(e){return jaxon.tools.ajax.createRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return jaxon.tools.ajax.createRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")},jaxon.tools.ajax.createRequest()}},jaxon.tools.ajax.createRequest()}}:window.createRequest?jaxon.tools.ajax.createRequest=function(){return window.createRequest()}:jaxon.tools.ajax.createRequest=function(){throw{code:10002}},jaxon.tools.ajax.createRequest()}},jaxon.tools.array={is_in:function(e,t){let n=0;const a=e.length;for(;n<a;){if(e[n]==t)return!0;++n}return!1}},jaxon.tools.dom={$:function(e){if(!e)return null;if("string"!=typeof e)return e;const t=jaxon.config.baseDocument,n=t.getElementById(e);return n||(t.all?t.all[e]:n)},getBrowserHTML:function(e){const t=jaxon.config.baseDocument;if(!t.body)return"";const n=jaxon.$("jaxon_temp_workspace");n||(n=t.createElement("div"),n.setAttribute("id","jaxon_temp_workspace"),n.style.display="none",n.style.visibility="hidden",t.body.appendChild(n)),n.innerHTML=e;const a=n.innerHTML;return n.innerHTML="",a},willChange:function(e,t,n){if("string"==typeof e&&(e=jaxon.$(e)),e){let a;return a=e[t],n!=a}return!1},findFunction:function(e){let t=window;const n=e.split(".");for(const e=0;e<n.length&&null!=t;e++)t=t[n[e]];return t}},jaxon.tools.form={getValues:function(e){const t=arguments.length>1&&1==arguments[1],n=arguments.length>2?arguments[2]:"";"string"==typeof e&&(e=jaxon.$(e));const a={};return e&&e.childNodes&&jaxon.tools.form._getValues(a,e.childNodes,t,n),a},_getValues:function(e,t,n,a){const o=t.length;for(let r=0;r<o;++r){const o=t[r];void 0!==o.childNodes&&"select-one"!=o.type&&"select-multiple"!=o.type&&jaxon.tools.form._getValues(e,o.childNodes,n,a),jaxon.tools.form._getValue(e,o,n,a)}},_getValue:function(e,t,n,a){if(!t.name)return;if("PARAM"==t.tagName)return;if(t.disabled&&1==t.disabled&&0==n)return;if(a!=t.name.substring(0,a.length))return;if(t.type){if(("radio"==t.type||"checkbox"==t.type)&&0==t.checked)return;if("file"==t.type)return}const o=t.name;let r=[];if("select-multiple"==t.type){const e=t.length;for(let n=0;n<e;++n){const e=t.options[n];1==e.selected&&r.push(e.value)}}else r=t.value;if(0<=o.indexOf("[")){let n=o,a=n.substr(0,n.indexOf("[")),s=n.substr(n.indexOf("["));void 0===e[a]&&(e[a]={});let c=e;for(;0!=s.length;){const e=s.substr(0,s.indexOf("]")+1),n=a,o=c;if(s=s.substr(s.indexOf("]")+1),c=c[a],a=e.substr(1,e.length-2),""==a&&("select-multiple"==t.type?(a=n,c=o):a=c.length),void 0===a){a=0;for(let e in o[n])a++}void 0===c[a]&&(c[a]={})}c[a]=r}else e[o]=r}},jaxon.tools.queue={create:function(e){return{start:0,count:0,size:e,end:0,elements:[],timeout:null}},empty:function(e){return e.count<=0},full:function(e){return e.count>=e.size},push:function(e,t){if(jaxon.tools.queue.full(e))throw{code:10003};return e.elements[e.end]=t,++e.end>=e.size&&(e.end=0),++e.count},pushFront:function(e,t){if(jaxon.tools.queue.full(e))throw{code:10003};return jaxon.tools.queue.empty(e)?jaxon.tools.queue.push(e,t):(--e.start<0&&(e.start=e.size-1),e.elements[e.start]=t,++e.count)},pop:function(e){if(jaxon.tools.queue.empty(e))return null;let t=e.elements[e.start];return delete e.elements[e.start],++e.start>=e.size&&(e.start=0),e.count--,t},peek:function(e){return jaxon.tools.queue.empty(e)?null:e.elements[e.start]}},jaxon.tools.string={doubleQuotes:function(e){return void 0!==e&&e.replace(new RegExp("'","g"),'"')},singleQuotes:function(e){return void 0!==e&&e.replace(new RegExp('"',"g"),"'")},stripOnPrefix:function(e){return 0==(e=e.toLowerCase()).indexOf("on")&&(e=e.replace(/on/,"")),e},addOnPrefix:function(e){return 0!=(e=e.toLowerCase()).indexOf("on")&&(e="on"+e),e}},String.prototype.supplant||(String.prototype.supplant=function(e){return this.replace(/\{([^{}]*)\}/g,(function(t,n){const a=e[n];return"string"==typeof a||"number"==typeof a?a:t}))}),jaxon.tools.upload={createIframe:function(e){const t="jaxon_upload_"+e.upload.id;return jaxon.cmd.node.remove(t),jaxon.cmd.node.insert(e.upload.form,"iframe",t),e.upload.iframe=jaxon.tools.dom.$(t),e.upload.iframe.name=t,e.upload.iframe.style.display="none",e.upload.form.method="POST",e.upload.form.enctype="multipart/form-data",e.upload.form.action=jaxon.config.requestURI,e.upload.form.target=t,!0},_initialize:function(e){if(!e.upload)return!1;e.upload={id:e.upload,input:null,form:null,ajax:e.ajax};const t=jaxon.tools.dom.$(e.upload.id);if(!t)return console.log("Unable to find input field for file upload with id "+e.upload.id),!1;if("file"!==t.type)return console.log("The upload input field with id "+e.upload.id+" is not of type file"),!1;if(0===t.files.length)return console.log("There is no file selected for upload in input field with id "+e.upload.id),!1;if(void 0===t.name)return console.log("The upload input field with id "+e.upload.id+" has no name attribute"),!1;if(e.upload.input=t,e.upload.form=t.form,0!=e.upload.ajax)return!0;if(!t.form){let n=t;for(;null!==n&&"FORM"!==n.nodeName;)n=n.parentNode;if(null===n)return console.log("The upload input field with id "+e.upload.id+" is not in a form"),!1;e.upload.form=n}return jaxon.tools.upload.createIframe(e),!0},initialize:function(e){jaxon.tools.upload._initialize(e),e.upload&&e.upload.ajax&&e.upload.input||e.append("postHeaders",{"content-type":e.contentType})}},jaxon.cmd.delay={popAsyncRequest:function(e){return jaxon.tools.queue.empty(e)||"synchronous"===jaxon.tools.queue.peek(e).mode?null:jaxon.tools.queue.pop(e)},retry:function(e,t){let n=e.retries;if(n){if(--n,1>n)return!1}else n=t;return e.retries=n,e.requeue=!0,!0},setWakeup:function(e,t){null!==e.timeout&&(clearTimeout(e.timeout),e.timeout=null),e.timout=setTimeout((function(){jaxon.ajax.response.process(e)}),t)},confirmCallback:function(e,t,n){if(!0===n)for(;t>0&&e.response.count>1&&null!==jaxon.tools.queue.pop(e.response);)--t;!0===e.requeue?jaxon.cmd.delay.setWakeup(e.response,30):jaxon.ajax.response.process(e.response)},confirm:function(e,t,n){return e.requeue=!0,jaxon.ajax.message.confirm(n,"",(function(){jaxon.cmd.delay.confirmCallback(e,t,!1)}),(function(){jaxon.cmd.delay.confirmCallback(e,t,!0)})),e.requeue=!1,!1}},jaxon.cmd.event={setEvent:function(command){command.fullName="setEvent";const target=command.id,sEvent=command.prop,code=command.data;return"string"==typeof target&&(target=jaxon.$(target)),sEvent=jaxon.tools.string.addOnPrefix(sEvent),code=jaxon.tools.string.doubleQuotes(code),eval("target."+sEvent+" = function(e) { "+code+"; }"),!0},addHandler:function(command){return window.addEventListener?jaxon.cmd.event.addHandler=function(command){command.fullName="addHandler";const target=command.id,sEvent=command.prop,sFuncName=command.data;return"string"==typeof target&&(target=jaxon.$(target)),sEvent=jaxon.tools.string.stripOnPrefix(sEvent),eval('target.addEventListener("'+sEvent+'", '+sFuncName+", false);"),!0}:jaxon.cmd.event.addHandler=function(command){command.fullName="addHandler";const target=command.id,sEvent=command.prop,sFuncName=command.data;return"string"==typeof target&&(target=jaxon.$(target)),sEvent=jaxon.tools.string.addOnPrefix(sEvent),eval('target.attachEvent("'+sEvent+'", '+sFuncName+", false);"),!0},jaxon.cmd.event.addHandler(command)},removeHandler:function(command){return window.removeEventListener?jaxon.cmd.event.removeHandler=function(command){command.fullName="removeHandler";const target=command.id,sEvent=command.prop,sFuncName=command.data;return"string"==typeof target&&(target=jaxon.$(target)),sEvent=jaxon.tools.string.stripOnPrefix(sEvent),eval('target.removeEventListener("'+sEvent+'", '+sFuncName+", false);"),!0}:jaxon.cmd.event.removeHandler=function(command){command.fullName="removeHandler";const target=command.id,sEvent=command.prop,sFuncName=command.data;return"string"==typeof target&&(target=jaxon.$(target)),sEvent=jaxon.tools.string.addOnPrefix(sEvent),eval('target.detachEvent("'+sEvent+'", '+sFuncName+", false);"),!0},jaxon.cmd.event.removeHandler(command)}},jaxon.cmd.form={getInput:function(e,t,n){return void 0===window.addEventListener?jaxon.cmd.form.getInput=function(e,t,n){return jaxon.config.baseDocument.createElement('<input type="'+e+'" name="'+t+'" id="'+n+'">')}:jaxon.cmd.form.getInput=function(e,t,n){const a=jaxon.config.baseDocument.createElement("input");return a.setAttribute("type",e),a.setAttribute("name",t),a.setAttribute("id",n),a},jaxon.cmd.form.getInput(e,t,n)},createInput:function(e){e.fullName="createInput";const t=e.id,n=e.type,a=e.data,o=e.prop;"string"==typeof t&&(t=jaxon.$(t));const r=jaxon.cmd.form.getInput(n,a,o);return t&&r&&t.appendChild(r),!0},insertInput:function(e){e.fullName="insertInput";const t=e.id,n=e.type,a=e.data,o=e.prop;"string"==typeof t&&(t=jaxon.$(t));const r=jaxon.cmd.form.getInput(n,a,o);return r&&t&&t.parentNode&&t.parentNode.insertBefore(r,t),!0},insertInputAfter:function(e){e.fullName="insertInputAfter";const t=e.id,n=e.type,a=e.data,o=e.prop;"string"==typeof t&&(t=jaxon.$(t));const r=jaxon.cmd.form.getInput(n,a,o);return r&&t&&t.parentNode&&t.parentNode.insertBefore(r,t.nextSibling),!0}},jaxon.cmd.node={assign:function(element,property,data){switch("string"==typeof element&&(element=jaxon.$(element)),property){case"innerHTML":element.innerHTML=data;break;case"outerHTML":if(void 0===element.outerHTML){const e=jaxon.config.baseDocument.createRange();e.setStartBefore(element);const t=e.createContextualFragment(data);element.parentNode.replaceChild(t,element)}else element.outerHTML=data;break;default:jaxon.tools.dom.willChange(element,property,data)&&eval("element."+property+" = data;")}return!0},append:function(element,property,data){return"string"==typeof element&&(element=jaxon.$(element)),window.insertAdjacentHTML||element.insertAdjacentHTML?"innerHTML"==property?element.insertAdjacentHTML("beforeend",data):"outerHTML"==property?element.insertAdjacentHTML("afterend",data):element[property]+=data:eval("element."+property+" += data;"),!0},prepend:function(element,property,data){return"string"==typeof element&&(element=jaxon.$(element)),eval("element."+property+" = data + element."+property),!0},replace:function(element,sAttribute,aData){const sReplace=aData.r,sSearch="innerHTML"===sAttribute?jaxon.tools.dom.getBrowserHTML(aData.s):aData.s;"string"==typeof element&&(element=jaxon.$(element)),eval("let txt = element."+sAttribute);let bFunction=!1;"function"==typeof txt&&(txt=txt.join(""),bFunction=!0);let start=txt.indexOf(sSearch);if(start>-1){const newTxt=[];for(;start>-1;){const e=start+sSearch.length;newTxt.push(txt.substr(0,start)),newTxt.push(sReplace),txt=txt.substr(e,txt.length-e),start=txt.indexOf(sSearch)}newTxt.push(txt),newTxt=newTxt.join(""),(bFunction||jaxon.tools.dom.willChange(element,sAttribute,newTxt))&&eval("element."+sAttribute+"=newTxt;")}return!0},remove:function(e){return"string"==typeof e&&(e=jaxon.$(e)),e&&e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e),!0},create:function(e,t,n){"string"==typeof e&&(e=jaxon.$(e));const a=jaxon.config.baseDocument.createElement(t);return a.setAttribute("id",n),e&&e.appendChild(a),!0},insert:function(e,t,n){"string"==typeof e&&(e=jaxon.$(e));const a=jaxon.config.baseDocument.createElement(t);return a.setAttribute("id",n),e.parentNode.insertBefore(a,e),!0},insertAfter:function(e,t,n){"string"==typeof e&&(e=jaxon.$(e));const a=jaxon.config.baseDocument.createElement(t);return a.setAttribute("id",n),e.parentNode.insertBefore(a,e.nextSibling),!0},contextAssign:function(command){command.fullName="context assign";const code=[];return code.push("this."),code.push(command.prop),code.push(" = data;"),code=code.join(""),command.context.jaxonDelegateCall=function(data){eval(code)},command.context.jaxonDelegateCall(command.data),!0},contextAppend:function(command){command.fullName="context append";const code=[];return code.push("this."),code.push(command.prop),code.push(" += data;"),code=code.join(""),command.context.jaxonDelegateCall=function(data){eval(code)},command.context.jaxonDelegateCall(command.data),!0},contextPrepend:function(command){command.fullName="context prepend";const code=[];return code.push("this."),code.push(command.prop),code.push(" = data + this."),code.push(command.prop),code.push(";"),code=code.join(""),command.context.jaxonDelegateCall=function(data){eval(code)},command.context.jaxonDelegateCall(command.data),!0}},jaxon.cmd.script={includeScriptOnce:function(e){e.fullName="includeScriptOnce";const t=e.data,n=jaxon.config.baseDocument.getElementsByTagName("script"),a=n.length;for(let e=0;e<a;++e){const a=n[e];if(a.src&&0<=a.src.indexOf(t))return!0}return jaxon.cmd.script.includeScript(e)},includeScript:function(e){e.fullName="includeScript";const t=jaxon.config.baseDocument,n=t.getElementsByTagName("head"),a=t.createElement("script");return a.src=e.data,void 0===e.type?a.type="text/javascript":a.type=e.type,void 0!==e.type&&a.setAttribute("id",e.elm_id),n[0].appendChild(a),!0},removeScript:function(e){e.fullName="removeScript";const t=e.data,n=e.unld,a=jaxon.config.baseDocument.getElementsByTagName("script"),o=a.length;for(let e=0;e<o;++e){const o=a[e];if(o.src&&0<=o.src.indexOf(t)){if(void 0!==n){const e={};e.data=n,e.context=window,jaxon.cmd.script.execute(e)}o.parentNode.removeChild(o)}}return!0},sleep:function(e){return e.fullName="sleep",!jaxon.cmd.delay.retry(e,e.prop)||(jaxon.cmd.delay.setWakeup(e.response,100),!1)},alert:function(e){return e.fullName="alert",jaxon.ajax.message.info(e.data),!0},confirm:function(e){return e.fullName="confirm",jaxon.cmd.delay.confirm(e,e.count,e.data),!1},execute:function(command){command.fullName="execute Javascript";const returnValue=!0;return command.context=command.context?command.context:{},command.context.jaxonDelegateCall=function(){eval(command.data)},command.context.jaxonDelegateCall(),returnValue},waitFor:function(command){command.fullName="waitFor";let bResult=!1;const cmdToEval="bResult = (";cmdToEval+=command.data,cmdToEval+=");";try{command.context.jaxonDelegateCall=function(){eval(cmdToEval)},command.context.jaxonDelegateCall()}catch(e){}return 0!=bResult||!jaxon.cmd.delay.retry(command,command.prop)||(jaxon.cmd.delay.setWakeup(command.response,100),!1)},call:function(command){command.fullName="call js function";const parameters=command.data,scr=new Array;if(scr.push(command.func),scr.push("("),void 0!==parameters&&"object"==typeof parameters){const e=parameters.length;if(0<e){scr.push("parameters[0]");for(let t=1;t<e;++t)scr.push(", parameters["+t+"]")}}return scr.push(");"),command.context.jaxonDelegateCall=function(){eval(scr.join(""))},command.context.jaxonDelegateCall(),!0},setFunction:function(command){command.fullName="setFunction";const code=new Array;if(code.push(command.func),code.push(" = function("),"object"==typeof command.prop){let e="";for(let t in command.prop)code.push(e),code.push(command.prop[t]),e=","}else code.push(command.prop);return code.push(") { "),code.push(command.data),code.push(" }"),command.context.jaxonDelegateCall=function(){eval(code.join(""))},command.context.jaxonDelegateCall(),!0},wrapFunction:function(command){command.fullName="wrapFunction";const code=new Array;return code.push(command.func),code.push(" = jaxon.cmd.script.makeWrapper("),code.push(command.func),code.push(", command.prop, command.data, command.type, command.context);"),command.context.jaxonDelegateCall=function(){eval(code.join(""))},command.context.jaxonDelegateCall(),!0},makeWrapper:function(origFun,args,codeBlocks,returnVariable,context){const originalCall=(returnVariable.length>0?returnVariable+" = ":"")+origFun+"("+args+"); ";let code="wrapper = function("+args+") { ";returnVariable.length>0&&(code+=" let "+returnVariable+" = null;");let separator="";const bLen=codeBlocks.length;for(let e=0;e<bLen;++e)code+=separator+codeBlocks[e],separator=originalCall;returnVariable.length>0&&(code+=" return "+returnVariable+";"),code+=" } ";let wrapper=null;return context.jaxonDelegateCall=function(){eval(code)},context.jaxonDelegateCall(),wrapper}},jaxon.cmd.style={add:function(e,t){const n=jaxon.config.baseDocument,a=n.getElementsByTagName("head")[0],o=a.getElementsByTagName("link"),r=!1,s=o.length;for(let n=0;n<s&&0==r;++n)0<=o[n].href.indexOf(e)&&o[n].media==t&&(r=!0);if(0==r){const o=n.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=e,o.media=t,a.appendChild(o)}return!0},remove:function(e,t){const n=jaxon.config.baseDocument.getElementsByTagName("head")[0],a=n.getElementsByTagName("link");let o=0;for(;o<a.length;)0<=a[o].href.indexOf(e)&&a[o].media==t?n.removeChild(a[o]):++o;return!0},waitForCSS:function(e){const t=jaxon.config.baseDocument.styleSheets,n=[];let a=t.length;for(let e=0;e<a;++e){n[e]=0;try{n[e]=t[e].cssRules.length}catch(a){try{n[e]=t[e].rules.length}catch(e){}}}const o=!0;a=n.length;for(let e=0;e<a;++e)0==n[e]&&(o=!1);return 0!=o||!jaxon.cmd.delay.retry(e,e.prop)||(jaxon.cmd.delay.setWakeup(e.response,10),!1)}},jaxon.cmd.tree={startResponse:function(e){jxnElm=[]},createElement:function(command){eval([command.tgt," = document.createElement(command.data)"].join(""))},setAttribute:function(command){command.context.jaxonDelegateCall=function(){eval([command.tgt,".setAttribute(command.key, command.data)"].join(""))},command.context.jaxonDelegateCall()},appendChild:function(command){command.context.jaxonDelegateCall=function(){eval([command.par,".appendChild(",command.data,")"].join(""))},command.context.jaxonDelegateCall()},insertBefore:function(command){command.context.jaxonDelegateCall=function(){eval([command.tgt,".parentNode.insertBefore(",command.data,", ",command.tgt,")"].join(""))},command.context.jaxonDelegateCall()},insertAfter:function(command){command.context.jaxonDelegateCall=function(){eval([command.tgt,"parentNode.insertBefore(",command.data,", ",command.tgt,".nextSibling)"].join(""))},command.context.jaxonDelegateCall()},appendText:function(command){command.context.jaxonDelegateCall=function(){eval([command.par,".appendChild(document.createTextNode(command.data))"].join(""))},command.context.jaxonDelegateCall()},removeChildren:function(command){let skip=command.skip||0,remove=command.remove||-1,element=null;command.context.jaxonDelegateCall=function(){eval(["element = ",command.data].join(""))},command.context.jaxonDelegateCall();const children=element.childNodes;for(let e in children)0==isNaN(e)&&1==children[e].nodeType&&(skip>0?skip-=1:0!=remove&&(remove>0&&(remove-=1),element.removeChild(children[e])))},endResponse:function(e){jxnElm=[]}},jaxon.ajax.callback={create:function(){const e=jaxon.config,t=jaxon.ajax.callback,n={timers:{}};return n.timers.onResponseDelay=t.setupTimer(arguments.length>0?arguments[0]:e.defaultResponseDelayTime),n.timers.onExpiration=t.setupTimer(arguments.length>1?arguments[1]:e.defaultExpirationTime),n.onPrepare=null,n.onRequest=null,n.onResponseDelay=null,n.onExpiration=null,n.beforeResponseProcessing=null,n.onFailure=null,n.onRedirect=null,n.onSuccess=null,n.onComplete=null,n},setupTimer:function(e){return{timer:null,delay:e}},clearTimer:function(e,t){if(void 0!==e.timers)void 0!==e.timers[t]&&clearTimeout(e.timers[t].timer);else for(let n=0;n<e.length;++n)jaxon.ajax.callback.clearTimer(e[n],t)},execute:function(e,t,n){if(void 0===e.timers){for(let a=0;a<e.length;++a)jaxon.ajax.callback.execute(e[a],t,n);return}if(void 0===e[t]||"function"!=typeof e[t])return;let a=e[t];void 0!==e.timers[t]?e.timers[t].timer=setTimeout((function(){a(n)}),e.timers[t].delay):a(n)}},jaxon.ajax.handler={handlers:[],execute:function(e){return!jaxon.ajax.handler.isRegistered(e)||(e.id&&(e.target=jaxon.$(e.id)),jaxon.ajax.handler.call(e))},register:function(e,t){jaxon.ajax.handler.handlers[e]=t},unregister:function(e){const t=jaxon.ajax.handler.handlers[e];return delete jaxon.ajax.handler.handlers[e],t},isRegistered:function(e){return!!jaxon.ajax.handler.handlers[e.cmd]},call:function(e){return jaxon.ajax.handler.handlers[e.cmd](e)}},jaxon.ajax.handler.register("rcmplt",(function(e){return jaxon.ajax.response.complete(e.request),!0})),jaxon.ajax.handler.register("css",(function(e){return e.fullName="includeCSS",void 0===e.media&&(e.media="screen"),jaxon.cmd.style.add(e.data,e.media)})),jaxon.ajax.handler.register("rcss",(function(e){return e.fullName="removeCSS",void 0===e.media&&(e.media="screen"),jaxon.cmd.style.remove(e.data,e.media)})),jaxon.ajax.handler.register("wcss",(function(e){return e.fullName="waitForCSS",jaxon.cmd.style.waitForCSS(e)})),jaxon.ajax.handler.register("as",(function(e){e.fullName="assign/clear";try{return jaxon.cmd.node.assign(e.target,e.prop,e.data)}catch(e){}return!0})),jaxon.ajax.handler.register("ap",(function(e){return e.fullName="append",jaxon.cmd.node.append(e.target,e.prop,e.data)})),jaxon.ajax.handler.register("pp",(function(e){return e.fullName="prepend",jaxon.cmd.node.prepend(e.target,e.prop,e.data)})),jaxon.ajax.handler.register("rp",(function(e){return e.fullName="replace",jaxon.cmd.node.replace(e.id,e.prop,e.data)})),jaxon.ajax.handler.register("rm",(function(e){return e.fullName="remove",jaxon.cmd.node.remove(e.id)})),jaxon.ajax.handler.register("ce",(function(e){return e.fullName="create",jaxon.cmd.node.create(e.id,e.data,e.prop)})),jaxon.ajax.handler.register("ie",(function(e){return e.fullName="insert",jaxon.cmd.node.insert(e.id,e.data,e.prop)})),jaxon.ajax.handler.register("ia",(function(e){return e.fullName="insertAfter",jaxon.cmd.node.insertAfter(e.id,e.data,e.prop)})),jaxon.ajax.handler.register("DSR",jaxon.cmd.tree.startResponse),jaxon.ajax.handler.register("DCE",jaxon.cmd.tree.createElement),jaxon.ajax.handler.register("DSA",jaxon.cmd.tree.setAttribute),jaxon.ajax.handler.register("DAC",jaxon.cmd.tree.appendChild),jaxon.ajax.handler.register("DIB",jaxon.cmd.tree.insertBefore),jaxon.ajax.handler.register("DIA",jaxon.cmd.tree.insertAfter),jaxon.ajax.handler.register("DAT",jaxon.cmd.tree.appendText),jaxon.ajax.handler.register("DRC",jaxon.cmd.tree.removeChildren),jaxon.ajax.handler.register("DER",jaxon.cmd.tree.endResponse),jaxon.ajax.handler.register("c:as",jaxon.cmd.node.contextAssign),jaxon.ajax.handler.register("c:ap",jaxon.cmd.node.contextAppend),jaxon.ajax.handler.register("c:pp",jaxon.cmd.node.contextPrepend),jaxon.ajax.handler.register("s",jaxon.cmd.script.sleep),jaxon.ajax.handler.register("ino",jaxon.cmd.script.includeScriptOnce),jaxon.ajax.handler.register("in",jaxon.cmd.script.includeScript),jaxon.ajax.handler.register("rjs",jaxon.cmd.script.removeScript),jaxon.ajax.handler.register("wf",jaxon.cmd.script.waitFor),jaxon.ajax.handler.register("js",jaxon.cmd.script.execute),jaxon.ajax.handler.register("jc",jaxon.cmd.script.call),jaxon.ajax.handler.register("sf",jaxon.cmd.script.setFunction),jaxon.ajax.handler.register("wpf",jaxon.cmd.script.wrapFunction),jaxon.ajax.handler.register("al",jaxon.cmd.script.alert),jaxon.ajax.handler.register("cc",jaxon.cmd.script.confirm),jaxon.ajax.handler.register("ci",jaxon.cmd.form.createInput),jaxon.ajax.handler.register("ii",jaxon.cmd.form.insertInput),jaxon.ajax.handler.register("iia",jaxon.cmd.form.insertInputAfter),jaxon.ajax.handler.register("ev",jaxon.cmd.event.setEvent),jaxon.ajax.handler.register("ah",jaxon.cmd.event.addHandler),jaxon.ajax.handler.register("rh",jaxon.cmd.event.removeHandler),jaxon.ajax.handler.register("dbg",(function(e){return e.fullName="debug message",console.log(e.data),!0})),jaxon.ajax.message={success:function(e,t){alert(e)},info:function(e,t){alert(e)},warning:function(e,t){alert(e)},error:function(e,t){alert(e)},confirm:function(e,t,n,a){confirm(e)?n():null!=a&&a()}},jaxon.ajax.parameters={bags:{},stringify:function(e){if(null==e)return"*";const t=typeof e;if("object"===t)try{return encodeURIComponent(JSON.stringify(e))}catch(t){e=""}return e=encodeURIComponent(e),"string"===t?"S"+e:"boolean"===t?"B"+e:"number"===t?"N"+e:e},toFormData:function(e){const t=new FormData;t.append("jxnr",e.dNow.getTime());const n=e.upload.input;for(const e of n.files)t.append(n.name,e);for(let n in e.functionName)t.append(n,encodeURIComponent(e.functionName[n]));if(e.parameters)for(const n of e.parameters)t.append("jxnargs[]",jaxon.ajax.parameters.stringify(n));if(e.bags){const n={};for(const t of e.bags)n[t]=jaxon.ajax.parameters.bags[t]??"*";t.append("jxnbags",jaxon.ajax.parameters.stringify(n))}e.requestURI=e.URI,e.requestData=t},toUrlEncoded:function(e){const t=[];t.push("jxnr="+e.dNow.getTime());for(const n in e.functionName)t.push(n+"="+encodeURIComponent(e.functionName[n]));if(e.parameters)for(const n of e.parameters)t.push("jxnargs[]="+jaxon.ajax.parameters.stringify(n));if(e.bags){const n={};for(const t of e.bags)n[t]=jaxon.ajax.parameters.bags[t]??"*";t.push("jxnbags="+jaxon.ajax.parameters.stringify(n))}e.requestURI=e.URI,"GET"===e.method&&(e.requestURI+=-1===e.requestURI.indexOf("?")?"?":"&",e.requestURI+=t.join("&"),t=[]),e.requestData=t.join("&")},process:function(e){const t=e.upload&&e.upload.ajax&&e.upload.input?jaxon.ajax.parameters.toFormData:jaxon.ajax.parameters.toUrlEncoded;e.dNow=new Date,t(e),delete e.dNow}},jaxon.ajax.request={initialize:function(e){const t=jaxon,n=t.config;e.append=function(e,t){void 0===this[e]&&(this[e]={});for(const n in t)void 0===this[e][n]&&(this[e][n]=t[n])},e.append("commonHeaders",n.commonHeaders),e.append("postHeaders",n.postHeaders),e.append("getHeaders",n.getHeaders),e.set=function(e,t){void 0===this[e]&&(this[e]=t)},e.set("statusMessages",n.statusMessages),e.set("waitCursor",n.waitCursor),e.set("mode",n.defaultMode),e.set("method",n.defaultMethod),e.set("URI",n.requestURI),e.set("httpVersion",n.defaultHttpVersion),e.set("contentType",n.defaultContentType),e.set("retry",n.defaultRetry),e.set("returnValue",n.defaultReturnValue),e.set("maxObjectDepth",n.maxObjectDepth),e.set("maxObjectSize",n.maxObjectSize),e.set("context",window),e.set("upload",!1),e.set("aborted",!1);const a=t.ajax.callback.create();if(a.take=function(e,t){void 0!==e[t]&&(a[t]=e[t],a.hasEvents=!0),delete e[t]},a.take(e,"onPrepare"),a.take(e,"onRequest"),a.take(e,"onResponseDelay"),a.take(e,"onExpiration"),a.take(e,"beforeResponseProcessing"),a.take(e,"onFailure"),a.take(e,"onRedirect"),a.take(e,"onSuccess"),a.take(e,"onComplete"),void 0!==e.callback?(void 0===e.callback.timers&&(e.callback.timers=[]),a.hasEvents&&(e.callback=[e.callback,a])):e.callback=a,e.status=e.statusMessages?n.status.update():n.status.dontUpdate(),e.cursor=e.waitCursor?n.cursor.update():n.cursor.dontUpdate(),e.method=e.method.toUpperCase(),"GET"!=e.method&&(e.method="POST"),e.requestRetry=e.retry,e.ajax=!!window.FormData,jaxon.tools.upload.initialize(e),delete e.append,delete e.set,delete a.take,void 0===e.URI)throw{code:10005}},prepare:function(e){const t=jaxon,n=t.tools,a=t.ajax.callback,o=t.callback,r=e.callback;if(a.execute([o,r],"onPrepare",e),!0===e.aborted)return!1;e.request=n.ajax.createRequest(),e.setRequestHeaders=function(e){if("object"==typeof e)for(let t in e)this.request.setRequestHeader(t,e[t])},e.setCommonRequestHeaders=function(){this.setRequestHeaders(this.commonHeaders)},e.setPostRequestHeaders=function(){this.setRequestHeaders(this.postHeaders)},e.setGetRequestHeaders=function(){this.setRequestHeaders(this.getHeaders)},e.request.onreadystatechange=function(){4===e.request.readyState&&(jaxon.tools.queue.empty(jaxon.cmd.delay.q.send)||"synchronous"==e.mode?jaxon.ajax.response.received(e):jaxon.tools.queue.push(jaxon.cmd.delay.q.recv,e))},e.finishRequest=function(){return this.returnValue},void 0!==e.userName&&void 0!==e.password?e.open=function(){this.request.open(this.method,this.requestURI,!0,e.userName,e.password)}:e.open=function(){this.request.open(this.method,this.requestURI,!0)},"POST"==e.method?e.applyRequestHeaders=function(){this.setCommonRequestHeaders();try{this.setPostRequestHeaders()}catch(e){throw this.method="GET",this.requestURI+=-1==this.requestURI.indexOf("?")?"?":"&",this.requestURI+=this.requestData,this.requestData="",0==this.requestRetry&&(this.requestRetry=1),e}}:e.applyRequestHeaders=function(){this.setCommonRequestHeaders(),this.setGetRequestHeaders()};let s=jaxon.tools.queue.empty(jaxon.cmd.delay.q.send);return"synchronous"===e.mode?(jaxon.tools.queue.push(jaxon.cmd.delay.q.send,e),jaxon.tools.queue.push(jaxon.cmd.delay.q.recv,e)):s||jaxon.tools.queue.push(jaxon.cmd.delay.q.send,e),s},submit:function(e){e.status.onRequest();const t=jaxon,n=t.ajax.callback,a=t.callback,o=e.callback;return n.execute([a,o],"onResponseDelay",e),n.execute([a,o],"onExpiration",e),n.execute([a,o],"onRequest",e),e.open(),e.applyRequestHeaders(),e.cursor.onWaiting(),e.status.onWaiting(),!1!==e.upload&&!e.upload.ajax&&e.upload.form?(e.upload.iframe.onload=function(){jaxon.ajax.response.upload(e)},e.upload.form.submit()):jaxon.ajax.request._send(e),e.finishRequest()},_send:function(e){e.request.send(e.requestData)},abort:function(e){e.aborted=!0,e.request.abort(),jaxon.ajax.response.complete(e)},execute:function(e,t){if(void 0===e)return!1;const n=t??{};n.functionName=e;const a=jaxon;for(a.ajax.request.initialize(n),a.ajax.parameters.process(n);n.requestRetry>0;)try{return a.ajax.request.prepare(n)?(--n.requestRetry,a.ajax.request.submit(n)):null}catch(e){if(jaxon.ajax.callback.execute([jaxon.callback,n.callback],"onFailure",n),0===n.requestRetry)throw e}}},jaxon.ajax.response={received:function(e){const t=jaxon,n=t.ajax.callback,a=t.callback,o=e.callback;if(e.aborted)return null;e.response=t.tools.queue.create(t.config.responseQueueSize),n.clearTimer([a,o],"onExpiration"),n.clearTimer([a,o],"onResponseDelay"),n.execute([a,o],"beforeResponseProcessing",e);const r=t.ajax.response.processor(e);return null==r?(n.execute([a,o],"onFailure",e),void t.ajax.response.complete(e)):r(e)},complete:function(e){if(jaxon.ajax.callback.execute([jaxon.callback,e.callback],"onComplete",e),e.cursor.onComplete(),e.status.onComplete(),delete e.functionName,delete e.requestURI,delete e.requestData,delete e.requestRetry,delete e.request,delete e.response,delete e.set,delete e.open,delete e.setRequestHeaders,delete e.setCommonRequestHeaders,delete e.setPostRequestHeaders,delete e.setGetRequestHeaders,delete e.applyRequestHeaders,delete e.finishRequest,delete e.status,delete e.cursor,"synchronous"==e.mode){let e=jaxon.tools.queue,t=jaxon.cmd.delay;for(e.pop(t.q.send),e.pop(t.q.recv);null!=(recvRequest=t.popAsyncRequest(t.q.recv));)jaxon.ajax.response.received(recvRequest);for(;null!=(nextRequest=t.popAsyncRequest(t.q.send));)jaxon.ajax.request.submit(nextRequest);null!=(nextRequest=e.peek(t.q.send))&&jaxon.ajax.request.submit(nextRequest)}},process:function(e){null!=e.timeout&&(clearTimeout(e.timeout),e.timeout=null);let t=null;for(;null!=(t=jaxon.tools.queue.pop(e));){try{if(0==jaxon.ajax.handler.execute(t))return 1==t.requeue?jaxon.tools.queue.pushFront(e,t):delete t,!1}catch(e){console.log(e)}delete t}return!0},processFragment:function(e,t,n,o){const r=jaxon.tools;for(nodeName in e)if("jxnobj"==nodeName)for(a in e[nodeName]){if(parseInt(a)!=a)continue;const n=e[nodeName][a];n.fullName="*unknown*",n.sequence=t,n.response=o.response,n.request=o,n.context=o.context,r.queue.push(o.response,n),++t}else if("jxnrv"==nodeName)n=e[nodeName];else{if("debugmsg"!=nodeName)throw{code:10004,data:command.fullName};txt=e[nodeName]}return n},processor:function(e){if(void 0!==e.responseProcessor)return e.responseProcessor;let t=e.request.getResponseHeader("content-type");if(!t)return null;let n="";if(0<=t.indexOf("application/json"))n=e.request.responseText;else if(0<=t.indexOf("text/html")){n=e.request.responseText;let t=n.indexOf('{"jxnobj"');if(t<0)return null;t>0&&(n=n.substr(t))}try{return e.request.responseJSON=JSON.parse(n),jaxon.ajax.response.json}catch(e){return null}},json:function(e){const t=jaxon,n=t.tools,a=t.ajax.callback,o=t.callback,r=e.callback;let s=e.returnValue;if(n.array.is_in(t.ajax.response.successCodes,e.request.status)){a.execute([o,r],"onSuccess",e);let c=0;"object"==typeof e.request.responseJSON&&"object"==typeof e.request.responseJSON.jxnobj&&(e.status.onProcessing(),s=t.ajax.response.processFragment(e.request.responseJSON,c,s,e));const l={fullName:"Response Complete"};l.sequence=c,l.request=e,l.context=e.context,l.cmd="rcmplt",n.queue.push(e.response,l),null==e.response.timeout&&t.ajax.response.process(e.response)}else n.array.is_in(t.ajax.response.redirectCodes,e.request.status)?(a.execute([o,r],"onRedirect",e),window.location=e.request.getResponseHeader("location"),t.ajax.response.complete(e)):n.array.is_in(t.ajax.response.errorsForAlert,e.request.status)&&(a.execute([o,r],"onFailure",e),t.ajax.response.complete(e));return s},upload:function(e){const t=jaxon,n=t.ajax.callback,a=t.callback,o=e.callback;let r=!1;const s=e.upload.iframe.contentWindow.res;if(s&&s.code?"error"===s.code&&(jaxon.ajax.message.error(s.msg),r=!0):(jaxon.ajax.message.error("The server returned an invalid response"),r=!0),r)return n.clearTimer([a,o],"onExpiration"),n.clearTimer([a,o],"onResponseDelay"),n.execute([a,o],"onFailure",e),void jaxon.ajax.response.complete(e);"success"===s.code&&(e.requestData+="&jxnupl="+encodeURIComponent(s.upl),jaxon.ajax.request._send(e))},successCodes:["0","200"],errorsForAlert:["400","401","402","403","404","500","501","502","503"],redirectCodes:["301","302","307"]},jaxon.dom={},function(e,t){"use strict";e=e||"docReady",t=t||window;let n=[],a=!1,o=!1;function r(){if(!a){a=!0;for(let e=0;e<n.length;e++)n[e].fn.call(window,n[e].ctx);n=[]}}function s(){"complete"===document.readyState&&r()}t[e]=function(e,t){a?setTimeout((function(){e(t)}),1):(n.push({fn:e,ctx:t}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(r,1):o||(document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):(document.attachEvent("onreadystatechange",s),window.attachEvent("onload",r)),o=!0))}}("ready",jaxon.dom),
/*
    @package jaxon
    @version $Id: jaxon.core.js 327 2007-02-28 16:55:26Z calltoconstruct $
    @copyright Copyright (c) 2005-2007 by Jared White & J. Max Wilson
    @copyright Copyright (c) 2008-2010 by Joseph Woolley, Steffen Konerow, Jared White  & J. Max Wilson
    @license http://www.jaxonproject.org/bsd_license.txt BSD License
*/
jaxon.callback=jaxon.ajax.callback.create(),jaxon.request=jaxon.ajax.request.execute,jaxon.register=jaxon.ajax.handler.register,jaxon.$=jaxon.tools.dom.$,jaxon.getFormValues=jaxon.tools.form.getValues,jaxon.msg=jaxon.ajax.message,jaxon.js=jaxon.cmd.script,jaxon.isLoaded=!0,jaxon.cmd.delay.q={send:jaxon.tools.queue.create(jaxon.config.requestQueueSize),recv:jaxon.tools.queue.create(2*jaxon.config.requestQueueSize)},jaxon.command={handler:{},handler:{register:jaxon.ajax.handler.register},create:function(e,t,n){return{cmd:"*",fullName:"* unknown command name *",sequence:e,request:t,context:n}}};const jxn={$:jaxon.tools.dom.$,getFormValues:jaxon.tools.form.getValues,request:jaxon.request};