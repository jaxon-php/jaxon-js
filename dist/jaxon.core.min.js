/*
    @package jaxon
    @version $Id: jaxon.core.js 327 2007-02-28 16:55:26Z calltoconstruct $
    @copyright Copyright (c) 2005-2007 by Jared White & J. Max Wilson
    @copyright Copyright (c) 2008-2010 by Joseph Woolley, Steffen Konerow, Jared White  & J. Max Wilson
    @copyright Copyright (c) 2017 by Thierry Feuzeu, Joseph Woolley, Steffen Konerow, Jared White  & J. Max Wilson
    @license https://opensource.org/license/bsd-3-clause/ BSD License
*/
var jaxon={version:{major:"4",minor:"0",patch:"2"},debug:{verbose:{}},ajax:{callback:{},handler:{},parameters:{},request:{},response:{}},cmd:{head:{},body:{},script:{},form:{},event:{}},utils:{dom:{},form:{},queue:{},string:{},upload:{}},dom:{},config:{commonHeaders:{"If-Modified-Since":"Sat, 1 Jan 2000 00:00:00 GMT"},postHeaders:{},getHeaders:{},waitCursor:!1,statusMessages:!1,baseDocument:document,requestURI:document.URL,defaultMode:"asynchronous",defaultHttpVersion:"HTTP/1.1",defaultContentType:"application/x-www-form-urlencoded",defaultResponseDelayTime:1e3,convertResponseToJson:!0,defaultExpirationTime:1e4,defaultMethod:"POST",defaultRetry:5,defaultReturnValue:!1,maxObjectDepth:20,maxObjectSize:2e3,commandQueueSize:1e3,requestQueueSize:1e3,httpRequestOptions:{mode:"cors",cache:"no-cache",credentials:"same-origin",redirect:"manual"}}};!function(e){e.setRequestOptions=t=>{if(void 0===e.requestURI)throw{code:10005};["commonHeaders","postHeaders","getHeaders"].forEach((n=>t[n]={...e[n],...t[n]}));const n={statusMessages:e.statusMessages,waitCursor:e.waitCursor,mode:e.defaultMode,method:e.defaultMethod,URI:e.requestURI,httpVersion:e.defaultHttpVersion,contentType:e.defaultContentType,convertResponseToJson:e.convertResponseToJson,retry:e.defaultRetry,returnValue:e.defaultReturnValue,maxObjectDepth:e.maxObjectDepth,maxObjectSize:e.maxObjectSize,context:window,upload:!1,aborted:!1};Object.keys(n).forEach((e=>t[e]=t[e]??n[e])),t.method=t.method.toUpperCase(),"GET"!==t.method&&(t.method="POST"),t.requestRetry=t.retry},e.status={update:{onRequest:()=>console.log("Sending Request..."),onWaiting:()=>console.log("Waiting for Response..."),onProcessing:()=>console.log("Processing..."),onComplete:()=>console.log("Done.")},dontUpdate:{onRequest:()=>{},onWaiting:()=>{},onProcessing:()=>{},onComplete:()=>{}}},e.cursor={update:{onWaiting:()=>{jaxon.config.baseDocument.body&&(jaxon.config.baseDocument.body.style.cursor="wait")},onComplete:()=>{jaxon.config.baseDocument.body&&(jaxon.config.baseDocument.body.style.cursor="auto")}},dontUpdate:{onWaiting:()=>{},onComplete:()=>{}}}}(jaxon.config),function(e,t){e.$=e=>e?"string"==typeof e?t.getElementById(e):e:null;e.getBrowserHTML=n=>{const o=(()=>{const n=e.$("jaxon_temp_workspace");if(n)return n;if(!t.body)return null;const o=t.createElement("div");return o.setAttribute("id","jaxon_temp_workspace"),o.style.display="none",o.style.visibility="hidden",t.body.appendChild(o),o})();o.innerHTML=n;const r=o.innerHTML;return o.innerHTML="",r},e.willChange=(t,n,o)=>!!(t=e.$(t))&&o!=t[n],e.removeElement=t=>{(t=e.$(t))&&t.parentNode&&t.parentNode.removeChild&&t.parentNode.removeChild(t)},e.getAttrValue=(e,t)=>{if(null===(aMatches=t.match(/^(.+)\[(\d+)\]$/)))return e[t];t=aMatches[1];const n=parseInt(aMatches[2]);return e[t][n]},e.findFunction=(t,n=window)=>{const o=t.split("."),r=o.length;for(let t=0;t<r&&n;t++)n=e.getAttrValue(n,o[t]);return n??null},e.getInnerObject=(t,n=window)=>{const o=t.split(".");t=o.pop();const r=o.length;for(let t=0;t<r&&n;t++){const r="css"===o[t]?"style":o[t];n=e.getAttrValue(n,r)}return n?{node:n,attr:t}:null},e.createFunction=(n,o="jaxon.cmd.script.context.delegateCall")=>{if(!n)return!1;try{const r="jaxon_cmd_script_"+(void 0===o?"delegate_call":o.toLowerCase().replaceAll(".","_"));e.removeElement(r);const a=t.createElement("script");a.setAttribute("id",r),a.textContent=`\n    ${o} = ${n}\n`,t.body.appendChild(a)}catch(e){return!1}return!0}}(jaxon.utils.dom,jaxon.config.baseDocument),function(e,t){const n=(e,t)=>{t.forEach((t=>{const{childNodes:o,type:r}=t;void 0!==o&&"select-one"!==r&&"select-multiple"!==r&&n(e,o),((e,{type:t,name:n,tagName:o,checked:r,disabled:a,value:s,options:c})=>{if(!n||"PARAM"===o)return;if(!e.submitDisabled&&a)return;const{prefix:i}=e;if(i.length>0&&i!==n.substring(0,i.length))return;if(("radio"===t||"checkbox"===t)&&!r)return;if("file"===t)return;const u="select-multiple"!==t?s:Array.from(c).filter((({selected:e})=>e)).map((({value:e})=>e)),l=n.indexOf("[");if(l<0)return void(e.values[n]=u);let d=n.substring(0,l),p=n.substring(l);void 0===e.values[d]&&(e.values[d]={});let m=e.values;for(;p.length>0;){const e=p.substring(0,p.indexOf("]")+1),n=d,o=m;p=p.substring(p.indexOf("]")+1),m=m[d],d=e.substring(1,e.length-1),""===d&&("select-multiple"===t?(d=n,m=o):d=m.length),void 0===d&&(d=Object.keys(o[n]).length),m[d]=m[d]||{}}m[d]=u})(e,t)}))};e.getValues=(e,o=!1,r="")=>{const a={submitDisabled:!0===o||1===o,prefix:r??"",values:{}},s=t.$(e);return s&&s.childNodes&&n(a,s.childNodes),a.values}}(jaxon.utils.form,jaxon.utils.dom),function(e){e.create=e=>({start:0,count:0,size:e,end:0,elements:[],paused:!1}),e.empty=e=>e.count<=0,e.full=e=>e.count>=e.size,e.push=(t,n)=>{if(e.full(t))throw{code:10003};return t.elements[t.end]=n,++t.end>=t.size&&(t.end=0),++t.count},e.pushFront=(t,n)=>{if(e.full(t))throw{code:10003};return e.empty(t)?e.push(t,n):(--t.start<0&&(t.start=t.size-1),t.elements[t.start]=n,++t.count)},e.pop=t=>{if(e.empty(t))return null;const n=t.elements[t.start];return delete t.elements[t.start],++t.start>=t.size&&(t.start=0),t.count--,n},e.peek=t=>e.empty(t)?null:t.elements[t.start]}(jaxon.utils.queue),function(e){"use strict";let t=[],n=!1,o=!1;const r=()=>{n||(n=!0,t.forEach((e=>e.fn.call(window,e.ctx))),t=[])};e.ready=function(e,a){n?setTimeout((function(){e(a)}),1):(t.push({fn:e,ctx:a}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(r,1):o||(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1),o=!0))}}(jaxon.dom),function(e){e.doubleQuotes=e=>void 0!==e&&e.replace(new RegExp("'","g"),'"'),e.singleQuotes=e=>void 0!==e&&e.replace(new RegExp('"',"g"),"'"),e.stripOnPrefix=e=>0===(e=e.toLowerCase()).indexOf("on")?e.replace(/on/,""):e,e.addOnPrefix=e=>0!==(e=e.toLowerCase()).indexOf("on")?"on"+e:e,e.typeOf=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),String.prototype.supplant||(String.prototype.supplant=function(e){return this.replace(/\{([^{}]*)\}/g,((t,n)=>{const o=e[n],r=typeof o;return"string"===r||"number"===r?o:t}))})}(jaxon.utils.string),function(e,t,n){e.initialize=e=>{(e=>{if(!e.upload)return!1;e.upload={id:e.upload,input:null,form:null};const o=t.$(e.upload.id);return o?"file"!==o.type?(n.log("The upload input field with id "+e.upload.id+" is not of type file"),!1):0===o.files.length?(n.log("There is no file selected for upload in input field with id "+e.upload.id),!1):void 0===o.name?(n.log("The upload input field with id "+e.upload.id+" has no name attribute"),!1):(e.upload.input=o,e.upload.form=o.form,!0):(n.log("Unable to find input field for file upload with id "+e.upload.id),!1)})(e)||(e.postHeaders["content-type"]=e.contentType)}}(jaxon.utils.upload,jaxon.utils.dom,console),function(e,t,n){const o=e=>({timer:null,delay:e}),r=["onInitialize","onProcessParams","onPrepare","onRequest","onResponseDelay","onExpiration","beforeResponseProcessing","onFailure","onRedirect","onSuccess","onComplete"];e.create=(e,t)=>{const a={timers:{onResponseDelay:o(e??n.defaultResponseDelayTime),onExpiration:o(t??n.defaultExpirationTime)}};return r.forEach((e=>a[e]=null)),a},e.callback=e.create(),e.initCallbacks=n=>{if("object"===t.typeOf(n.callback)&&(n.callback=[n.callback]),"array"===t.typeOf(n.callback))return void n.callback.forEach((e=>{void 0===e.timers&&(e.timers={})}));let o=!1;const a=e.create();r.forEach((e=>{void 0!==n[e]&&(a[e]=n[e],o=!0,delete n[e])})),n.callback=o?[a]:[]};const a=({callback:t=[]})=>[e.callback,...t];e.execute=(e,n)=>a(e).forEach((o=>((e,n,o)=>{const r=e[n];if(!r||"function"!==t.typeOf(r))return;const a=e.timers[n];a?a.timer=setTimeout((()=>r(o)),a.delay):r(o)})(o,n,e)));e.clearTimer=(e,t)=>a(e).forEach((e=>((e,t)=>{const n=e.timers[t];void 0!==n&&null!==n.timer&&clearTimeout(n.timer)})(e,t)))}(jaxon.ajax.callback,jaxon.utils.string,jaxon.config),function(e,t,n,o,r){const a={};e.q={send:o.create(t.requestQueueSize),recv:o.create(2*t.requestQueueSize)},e.register=(e,t,n="")=>a[e]={name:n,func:t},e.unregister=e=>{const t=a[e];return delete a[e],t.func},e.isRegistered=({cmd:e})=>void 0!==e&&void 0!==a[e],e.execute=t=>!e.isRegistered(t)||(t.id&&(t.target=r.$(t.id)),e.call(t));const s=t=>{try{return e.execute(t),!0}catch(e){console.log(e)}return!1};e.processCommands=e=>{let t=null;for(;!e.paused&&null!==(t=o.pop(e));)if(!s(t))return!0;return!0},e.call=e=>{const t=a[e.cmd];return e.fullName=t.name,t.func(e)},e.popAsyncRequest=e=>o.empty(e)||"synchronous"===o.peek(e).mode?null:o.pop(e),e.sleep=({prop:t,response:n})=>(n.paused=!0,setTimeout((()=>{n.paused=!1,e.processCommands(n)}),100*t),!0),e.setWakeup=(t,n)=>{const{prop:r,response:a}=t;void 0===t.retries&&(t.retries=r),a.paused=!1,t.retries-- >0&&(o.pushFront(a,t),e.sleep({prop:n,response:a}))},e.alert=e=>n.message.info(e);const c=(t,n)=>{for(;n>0&&t.count>1&&null!==o.pop(t);)--n;t.paused=!1,e.processCommands(t)};e.confirm=(e,t,o)=>{const{response:r}=e;return r.paused=!0,n.message.confirm(o,"",(()=>c(r,0)),(()=>c(r,t))),!0}}(jaxon.ajax.handler,jaxon.config,jaxon.ajax,jaxon.utils.queue,jaxon.utils.dom),function(e,t,n){e.bags={};const o=({func:o,parameters:r,bags:a=[]},s)=>{const c=new Date;var i;s("jxnr",c.getTime()),s("jxnv",`${n.major}.${n.minor}.${n.patch}`),Object.keys(o).forEach((e=>s(e,encodeURIComponent(o[e])))),[...r].forEach((e=>s("jxnargs[]",(e=>{if(null==e)return"*";const n=t.typeOf(e);if("object"===n||"array"===n)try{return encodeURIComponent(JSON.stringify(e))}catch(t){e=""}return e=encodeURIComponent(e),"string"===n?"S"+e:"boolean"===n?"B"+e:"number"===n?"N"+e:e})(e)))),a.length>0&&s("jxnbags",encodeURIComponent((i=a,JSON.stringify(i.reduce(((t,n)=>({...t,[n]:e.bags[n]??"*"})),{})))))};e.process=e=>{e.requestURI=e.URI,e.requestData=(({upload:e})=>e&&e.form&&e.input)(e)?(e=>{const t=new FormData;o(e,((e,n)=>t.append(e,n)));const n=e.upload.input;return n.files&&[...n.files].forEach((e=>t.append(n.name,e))),t})(e):(e=>{const t=[];return o(e,((e,n)=>t.push(e+"="+n))),"POST"===e.method?t.join("&"):(e.requestURI+=-1===e.requestURI.indexOf("?")?"?":"&",e.requestURI+=t.join("&"),"")})(e)}}(jaxon.ajax.parameters,jaxon.utils.string,jaxon.version),function(e,t,n,o,r,a,s,c){e.initialize=e=>{t.setRequestOptions(e),r.initCallbacks(e),r.execute(e,"onInitialize"),e.status=e.statusMessages?t.status.update:t.status.dontUpdate,e.cursor=e.waitCursor?t.cursor.update:t.cursor.dontUpdate,s.initialize(e)},e.prepare=e=>{--e.requestRetry,r.execute(e,"onPrepare"),e.httpRequestOptions={...t.httpRequestOptions,method:e.method,headers:{...e.commonHeaders,..."POST"===e.method?e.postHeaders:e.getHeaders},body:e.requestData},e.responseConverter=t=>(e.response=t,e.convertResponseToJson?t.json():t.text()),e.responseHandler=t=>{e.responseContent=t,c.empty(a.q.send)||"synchronous"===e.mode?o.received(e):c.push(a.q.recv,e)},e.errorHandler=t=>{throw r.execute(e,"onFailure"),t},e.responseProcessor||(e.responseProcessor=o.jsonProcessor);const n=c.empty(a.q.send);return"synchronous"===e.mode?(c.push(a.q.send,e),c.push(a.q.recv,e),n):(n||c.push(a.q.send,e),n)};e.complete=t=>{if(r.execute(t,"onComplete"),t.cursor.onComplete(),t.status.onComplete(),(e=>{delete e.func,delete e.URI,delete e.requestURI,delete e.requestData,delete e.requestRetry,delete e.httpRequestOptions,delete e.responseHandler,delete e.responseConverter,delete e.responseContent,delete e.response,delete e.errorHandler})(t),"synchronous"===t.mode){for(c.pop(a.q.send),c.pop(a.q.recv);null!==(recvRequest=a.popAsyncRequest(a.q.recv));)o.received(recvRequest);for(;null!==(nextRequest=a.popAsyncRequest(a.q.send));)e.submit(nextRequest);null!==(nextRequest=c.peek(a.q.send))&&e.submit(nextRequest)}},e._send=e=>{fetch(e.requestURI,e.httpRequestOptions).then(e.responseConverter).then(e.responseHandler).catch(e.errorHandler)},e.submit=t=>(t.status.onRequest(),r.execute(t,"onResponseDelay"),r.execute(t,"onExpiration"),r.execute(t,"onRequest"),t.cursor.onWaiting(),t.status.onWaiting(),e._send(t),t.returnValue),e.abort=t=>{t.aborted=!0,e.complete(t)},e.execute=(t,o)=>{if(void 0===t)return!1;const a=o??{};for(a.func=t,e.initialize(a),r.execute(a,"onProcessParams"),n.process(a);a.requestRetry>0;)try{return e.prepare(a)?e.submit(a):null}catch(e){if(r.execute(a,"onFailure"),a.requestRetry<=0)throw e}return!0}}(jaxon.ajax.request,jaxon.config,jaxon.ajax.parameters,jaxon.ajax.response,jaxon.ajax.callback,jaxon.ajax.handler,jaxon.utils.upload,jaxon.utils.queue),function(e,t,n,o,r,a){const s=[0,200],c=[400,401,402,403,404,500,501,502,503],i=[301,302,307];e.isSuccessCode=e=>s.indexOf(e)>=0,e.isRedirectCode=e=>i.indexOf(e)>=0,e.isErrorCode=e=>c.indexOf(e)>=0;e.jsonProcessor=t=>{const s=t.response.status;if(e.isSuccessCode(s)){r.execute(t,"onSuccess");const e=(e=>{const t=e.responseContent;if(!t||!t.jxnobj)return 0;e.status.onProcessing(),t.jxnrv&&(e.returnValue=t.jxnrv),t.debugmsg&&console.log(t.debugmsg);let n=0;return t.jxnobj.forEach((t=>a.push(e.commandQueue,{fullName:"*unknown*",...t,sequence:n++,response:e.commandQueue,request:e,context:e.context}))),n})(t);((e,t)=>{a.push(e.commandQueue,{fullName:"Response Complete",sequence:t,request:e,context:e.context,cmd:"rcmplt"})})(t,e),n.processCommands(t.commandQueue)}else e.isRedirectCode(s)?(r.execute(t,"onRedirect"),o.complete(t),window.location=t.response.headers.get("location")):e.isErrorCode(s)&&(r.execute(t,"onFailure"),o.complete(t));return t.returnValue},e.received=e=>e.aborted?null:(e.commandQueue=a.create(t.commandQueueSize),r.clearTimer(e,"onExpiration"),r.clearTimer(e,"onResponseDelay"),r.execute(e,"beforeResponseProcessing"),e.responseProcessor(e))}(jaxon.ajax.response,jaxon.config,jaxon.ajax.handler,jaxon.ajax.request,jaxon.ajax.callback,jaxon.utils.queue),function(e,t,n){e.assign=({target:e,prop:n,data:o})=>{const r=t.getInnerObject(n,e);return null!==r&&(r.node[r.attr]=o),!0},e.append=({target:e,prop:n,data:o})=>{const r=t.getInnerObject(n,e);return null!==r&&(r.node[r.attr]=r.node[r.attr]+o),!0},e.prepend=({target:e,prop:n,data:o})=>{const r=t.getInnerObject(n,e);return null!==r&&(r.node[r.attr]=o+r.node[r.attr]),!0};e.replace=({target:e,prop:n,data:{s:o,r:r}})=>{const a=t.getInnerObject(n,e);return null!==a&&((e,n,o)=>{const r="function"==typeof e.node[e.attr],a=(r?e.node[e.attr].join(""):e.node[e.attr]).replaceAll(n,o);(r||t.willChange(e.node,e.attr,a))&&(e.node[e.attr]=a)})(a,"innerHTML"===n?t.getBrowserHTML(o):o,r),!0},e.remove=({target:e})=>(t.removeElement(e),!0),e.create=({target:e,data:t,prop:o})=>{if(e){const r=n.createElement(t);r.setAttribute("id",o),e.appendChild(r)}return!0},e.insert=({target:e,data:t,prop:o})=>{if(e&&e.parentNode){const r=n.createElement(t);r.setAttribute("id",o),e.parentNode.insertBefore(r,e)}return!0},e.insertAfter=({target:e,data:t,prop:o})=>{if(e&&e.parentNode){const r=n.createElement(t);r.setAttribute("id",o),e.parentNode.insertBefore(r,e.nextSibling)}return!0},e.contextAssign=({context:e,prop:n,data:o})=>{const r=t.getInnerObject(n,e);return null!==r&&(r.node[r.attr]=o),!0},e.contextAppend=({context:e,prop:n,data:o})=>{const r=t.getInnerObject(n,e);return null!==r&&(r.node[r.attr]=r.node[r.attr]+o),!0},e.contextPrepend=({context:e,prop:n,data:o})=>{const r=t.getInnerObject(n,e);return null!==r&&(r.node[r.attr]=o+r.node[r.attr]),!0}}(jaxon.cmd.body,jaxon.utils.dom,jaxon.config.baseDocument),function(e,t,n,o){e.setEvent=({target:e,prop:r,data:a})=>(t.createFunction(`(e) => { ${n.doubleQuotes(a)} }`),e[n.addOnPrefix(r)]=o.context.delegateCall,!0),e.addHandler=({target:e,prop:o,data:r})=>(e.addEventListener(n.stripOnPrefix(o),t.findFunction(r),!1),!0),e.removeHandler=({target:e,prop:o,data:r})=>(e.removeEventListener(n.stripOnPrefix(o),t.findFunction(r),!1),!0)}(jaxon.cmd.event,jaxon.utils.dom,jaxon.utils.string,jaxon.cmd.script),function(e,t){const n=(e,n,o)=>{const r=t.createElement("input");return r.setAttribute("type",e),r.setAttribute("name",n),r.setAttribute("id",o),r};e.createInput=({target:e,type:t,data:o,prop:r})=>{const a=n(t,o,r);return e&&a&&e.appendChild(a),!0},e.insertInput=({target:e,type:t,data:o,prop:r})=>{const a=n(t,o,r);return a&&e&&e.parentNode&&e.parentNode.insertBefore(a,e),!0},e.insertInputAfter=({target:e,type:t,data:o,prop:r})=>{const a=n(t,o,r);return a&&e&&e.parentNode&&e.parentNode.insertBefore(a,e.nextSibling),!0}}(jaxon.cmd.form,jaxon.config.baseDocument),function(e,t,n){e.includeScriptOnce=({data:t,type:o="text/javascript",elm_id:r})=>{const a=n.getElementsByTagName("script");return!!Array.from(a).find((e=>e.src&&e.src.indexOf(t)>=0))||e.includeScript({data:t,type:o,elm_id:r})},e.includeScript=({data:e,type:t="text/javascript",elm_id:o})=>{const r=n.getElementsByTagName("head"),a=n.createElement("script");return a.src=e,a.type=t,o&&a.setAttribute("id",o),r[0].appendChild(a),!0},e.removeScript=({data:t,unld:o})=>{const r=n.getElementsByTagName("script"),a=Array.from(r).find((e=>e.src&&e.src.indexOf(t)>=0));return!a||(o&&e.execute({data:o,context:window}),a.parentNode.removeChild(a),!0)},e.includeCSS=({data:e,media:t="screen"})=>{const o=n.getElementsByTagName("head")[0];if(Array.from(o.getElementsByTagName("link")).find((n=>n.href.indexOf(e)>=0&&n.media==t)))return!0;const r=n.createElement("link");return r.rel="stylesheet",r.type="text/css",r.href=e,r.media=t,o.appendChild(r),!0},e.removeCSS=({data:e,media:t="screen"})=>{const o=n.getElementsByTagName("head")[0];return o.getElementsByTagName("link").filter((n=>n.href.indexOf(e)>=0&&n.media===t)).forEach((e=>o.removeChild(e))),!0},e.waitForCSS=e=>{const o=n.styleSheets;return Array.from(o).every((e=>0!==(e.cssRules.length??e.rules.length??0)))||t.setWakeup(e,10),!0}}(jaxon.cmd.head,jaxon.ajax.handler,jaxon.config.baseDocument),function(e,t,n,o){e.alert=({data:e})=>(t.alert(e),!0),e.confirm=e=>{const{count:n,data:o}=e;return t.confirm(e,n,o),!1},e.call=({func:t,data:o,context:r={}})=>{e.context=r;const a=n.findFunction(t);return a&&a.apply(e.context,o),!0},e.execute=({data:t,context:o={}})=>{e.context=o;const r=`() => {\n    ${t}\n}`;return n.createFunction(r)&&e.context.delegateCall(),!0},e.waitFor=o=>{const{data:r,context:a={}}=o;e.context=a;const s=`() => {\n    return (${r});\n}`;return n.createFunction(s)&&e.context.delegateCall()||t.setWakeup(o,100),!0};const r=e=>{if(void 0===e)return"";const t=o.typeOf(e);return"array"===t?e.join(", "):"object"===t?e.values().join(", "):e};e.setFunction=({func:t,data:o,prop:a,context:s={}})=>{e.context=s;const c=`(${r(a)}) => {\n    ${o}\n}`;return n.createFunction(c,t),!0},e.wrapped={},e.wrapFunction=({func:t,type:o,prop:a,data:[s,c="// No call after"],context:i={}})=>{e.context=i;const u=n.findFunction(t);if(!u)return!0;const l=t.toLowerCase().replaceAll(".","_");e.wrapped[l]||(e.wrapped[l]=u);const d=o?`let ${o} = null;`:"// No return value",p=o?`${o} = `:"",m=o?`return ${o};`:"// No return value",f=`(${r(a)}) => {\n    ${d}\n    ${s}\n\n    const wrappedFuncName = "${t}".toLowerCase().replaceAll('.', '_');\n    // Call the wrapped function (saved in jaxon.cmd.script.wrapped) with the same parameters.\n    ${p}jaxon.cmd.script.wrapped[wrappedFuncName](${a});\n    ${c}\n    ${m}\n}`;return n.createFunction(f)&&e.context.delegateCall(),!0},e.redirect=({data:e,delay:t})=>t<=0?(window.location=e,!0):(window.setTimeout((()=>window.location=e),1e3*t),!0)}(jaxon.cmd.script,jaxon.ajax.handler,jaxon.utils.dom,jaxon.utils.string,jaxon.utils.queue),jaxon.request=jaxon.ajax.request.execute,jaxon.register=jaxon.ajax.handler.register,jaxon.$=jaxon.utils.dom.$,jaxon.getFormValues=jaxon.utils.form.getValues,jaxon.msg=jaxon.ajax.message,jaxon.js=jaxon.cmd.script,jaxon.isLoaded=!0,function(e,t,n){e("rcmplt",(({request:e})=>(n.request.complete(e),!0)),"Response complete"),e("ino",t.head.includeScriptOnce,"includeScriptOnce"),e("in",t.head.includeScript,"includeScript"),e("rjs",t.head.removeScript,"removeScript"),e("css",t.head.includeCSS,"includeCSS"),e("rcss",t.head.removeCSS,"removeCSS"),e("wcss",t.head.waitForCSS,"waitForCSS"),e("as",t.body.assign,"assign/clear"),e("ap",t.body.append,"append"),e("pp",t.body.prepend,"prepend"),e("rp",t.body.replace,"replace"),e("rm",t.body.remove,"remove"),e("ce",t.body.create,"create"),e("ie",t.body.insert,"insert"),e("ia",t.body.insertAfter,"insertAfter"),e("c:as",t.body.contextAssign,"context assign"),e("c:ap",t.body.contextAppend,"context append"),e("c:pp",t.body.contextPrepend,"context prepend"),e("s",n.handler.sleep,"sleep"),e("wf",t.script.waitFor,"waitFor"),e("js",t.script.execute,"execute Javascript"),e("jc",t.script.call,"call js function"),e("sf",t.script.setFunction,"setFunction"),e("wpf",t.script.wrapFunction,"wrapFunction"),e("al",t.script.alert,"alert"),e("cc",t.script.confirm,"confirm"),e("rd",t.script.redirect,"redirect"),e("ci",t.form.createInput,"createInput"),e("ii",t.form.insertInput,"insertInput"),e("iia",t.form.insertInputAfter,"insertInputAfter"),e("ev",t.event.setEvent,"setEvent"),e("ah",t.event.addHandler,"addHandler"),e("rh",t.event.removeHandler,"removeHandler"),e("dbg",(({data:e})=>(console.log(e),!0)),"Debug message"),n.message={success:(e,t)=>alert(e),info:(e,t)=>alert(e),warning:(e,t)=>alert(e),error:(e,t)=>alert(e),confirm:(e,t,n,o)=>{confirm(e)?n():o&&o()}}}(jaxon.register,jaxon.cmd,jaxon.ajax),jaxon.command={handler:{},handler:{register:jaxon.ajax.handler.register},create:(e,t,n)=>({cmd:"*",fullName:"* unknown command name *",sequence:e,request:t,context:n})};const jxn={$:jaxon.utils.dom.$,getFormValues:jaxon.utils.form.getValues,request:jaxon.request,call:jaxon.ajax.handler.call};