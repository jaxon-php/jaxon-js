var jaxon={config:{},debug:{verbose:{}},ajax:{},tools:{},cmd:{}};jaxon.config.setDefault=function(e,n){void 0===jaxon.config[e]&&(jaxon.config[e]=n)},jaxon.config.setDefault("commonHeaders",{"If-Modified-Since":"Sat, 1 Jan 2000 00:00:00 GMT"}),jaxon.config.setDefault("postHeaders",{}),jaxon.config.setDefault("getHeaders",{}),jaxon.config.setDefault("waitCursor",!1),jaxon.config.setDefault("statusMessages",!1),jaxon.config.setDefault("baseDocument",document),jaxon.config.setDefault("requestURI",jaxon.config.baseDocument.URL),jaxon.config.setDefault("defaultMode","asynchronous"),jaxon.config.setDefault("defaultHttpVersion","HTTP/1.1"),jaxon.config.setDefault("defaultContentType","application/x-www-form-urlencoded"),jaxon.config.setDefault("defaultResponseDelayTime",1e3),jaxon.config.setDefault("defaultExpirationTime",1e4),jaxon.config.setDefault("defaultMethod","POST"),jaxon.config.setDefault("defaultRetry",5),jaxon.config.setDefault("defaultReturnValue",!1),jaxon.config.setDefault("maxObjectDepth",20),jaxon.config.setDefault("maxObjectSize",2e3),jaxon.config.setDefault("responseQueueSize",1e3),jaxon.config.setDefault("requestQueueSize",1e3),jaxon.config.status={update:function(){return{onRequest:function(){window.status="Sending Request..."},onWaiting:function(){window.status="Waiting for Response..."},onProcessing:function(){window.status="Processing..."},onComplete:function(){window.status="Done."}}},dontUpdate:function(){return{onRequest:function(){},onWaiting:function(){},onProcessing:function(){},onComplete:function(){}}}},jaxon.config.cursor={update:function(){return{onWaiting:function(){jaxon.config.baseDocument.body&&(jaxon.config.baseDocument.body.style.cursor="wait")},onComplete:function(){jaxon.config.baseDocument.body.style.cursor="auto"}}},dontUpdate:function(){return{onWaiting:function(){},onComplete:function(){}}}},jaxon.tools.ajax={createRequest:function(){return"undefined"!=typeof XMLHttpRequest?jaxon.tools.ajax.createRequest=function(){return new XMLHttpRequest}:"undefined"!=typeof ActiveXObject?jaxon.tools.ajax.createRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.4.0")}catch(e){return jaxon.tools.ajax.createRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return jaxon.tools.ajax.createRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")},jaxon.tools.ajax.createRequest()}},jaxon.tools.ajax.createRequest()}}:window.createRequest?jaxon.tools.ajax.createRequest=function(){return window.createRequest()}:jaxon.tools.ajax.createRequest=function(){throw{code:10002}},jaxon.tools.ajax.createRequest()}},jaxon.tools.array={is_in:function(e,n){let t=0;const o=e.length;for(;t<o;){if(e[t]==n)return!0;++t}return!1}},jaxon.tools.dom={$:function(e){if(!e)return null;if("string"!=typeof e)return e;const n=jaxon.config.baseDocument,t=n.getElementById(e);return t||(n.all?n.all[e]:t)},_getWorkspace:function(){const e=jaxon.$("jaxon_temp_workspace");if(e)return e;const n=jaxon.config.baseDocument;if(!n.body)return null;const t=n.createElement("div");return t.setAttribute("id","jaxon_temp_workspace"),t.style.display="none",t.style.visibility="hidden",n.body.appendChild(t),t},getBrowserHTML:function(e){const n=jaxon.tools.dom._getWorkspace();n.innerHTML=e;const t=n.innerHTML;return n.innerHTML="",t},willChange:function(e,n,t){return"string"==typeof e&&(e=jaxon.$(e)),!!e&&t!=e[n]},findFunction:function(e){const n=e.split("."),t=n.length;let o=window;for(let e=0;e<t&&o;e++)o=o[n[e]];return o},getInnerObject:function(e,n){const t=n.split(".");n=t.pop();for(let n=0,o=t.length;n<o;n++){const o=t[n];if(!(e=e["css"===o?"style":o]))return[null,null]}return[e,n]}},jaxon.tools.form={getValues:function(e){const n=arguments.length>1&&1==arguments[1],t=arguments.length>2?arguments[2]:"";"string"==typeof e&&(e=jaxon.$(e));const o={};return e&&e.childNodes&&jaxon.tools.form._getValues(o,e.childNodes,n,t),o},_getValues:function(e,n,t,o){const a=n.length;for(let r=0;r<a;++r){const a=n[r];void 0!==a.childNodes&&"select-one"!=a.type&&"select-multiple"!=a.type&&jaxon.tools.form._getValues(e,a.childNodes,t,o),jaxon.tools.form._getValue(e,a,t,o)}},_getValue:function(e,n,t,o){if(!n.name)return;if("PARAM"==n.tagName)return;if(n.disabled&&1==n.disabled&&0==t)return;if(o!=n.name.substring(0,o.length))return;if(n.type){if(("radio"==n.type||"checkbox"==n.type)&&0==n.checked)return;if("file"==n.type)return}const a=n.name;let r=[];if("select-multiple"==n.type){const e=n.length;for(let t=0;t<e;++t){const e=n.options[t];1==e.selected&&r.push(e.value)}}else r=n.value;if(0<=a.indexOf("[")){let t=a,o=t.substr(0,t.indexOf("[")),s=t.substr(t.indexOf("["));void 0===e[o]&&(e[o]={});let c=e;for(;0!=s.length;){const e=s.substr(0,s.indexOf("]")+1),t=o,a=c;if(s=s.substr(s.indexOf("]")+1),c=c[o],o=e.substr(1,e.length-2),""==o&&("select-multiple"==n.type?(o=t,c=a):o=c.length),void 0===o){o=0;for(let e in a[t])o++}void 0===c[o]&&(c[o]={})}c[o]=r}else e[a]=r}},jaxon.tools.queue={create:function(e){return{start:0,count:0,size:e,end:0,elements:[],timeout:null}},empty:function(e){return e.count<=0},full:function(e){return e.count>=e.size},push:function(e,n){if(jaxon.tools.queue.full(e))throw{code:10003};return e.elements[e.end]=n,++e.end>=e.size&&(e.end=0),++e.count},pushFront:function(e,n){if(jaxon.tools.queue.full(e))throw{code:10003};return jaxon.tools.queue.empty(e)?jaxon.tools.queue.push(e,n):(--e.start<0&&(e.start=e.size-1),e.elements[e.start]=n,++e.count)},pop:function(e){if(jaxon.tools.queue.empty(e))return null;let n=e.elements[e.start];return delete e.elements[e.start],++e.start>=e.size&&(e.start=0),e.count--,n},peek:function(e){return jaxon.tools.queue.empty(e)?null:e.elements[e.start]}},jaxon.tools.string={doubleQuotes:function(e){return void 0!==e&&e.replace(new RegExp("'","g"),'"')},singleQuotes:function(e){return void 0!==e&&e.replace(new RegExp('"',"g"),"'")},stripOnPrefix:function(e){return 0==(e=e.toLowerCase()).indexOf("on")&&(e=e.replace(/on/,"")),e},addOnPrefix:function(e){return 0!=(e=e.toLowerCase()).indexOf("on")&&(e="on"+e),e}},String.prototype.supplant||(String.prototype.supplant=function(e){return this.replace(/\{([^{}]*)\}/g,(function(n,t){const o=e[t];return"string"==typeof o||"number"==typeof o?o:n}))}),jaxon.tools.upload={createIframe:function(e){const n="jaxon_upload_"+e.upload.id;return jaxon.cmd.node.remove(n),jaxon.cmd.node.insert(e.upload.form,"iframe",n),e.upload.iframe=jaxon.tools.dom.$(n),e.upload.iframe.name=n,e.upload.iframe.style.display="none",e.upload.form.method="POST",e.upload.form.enctype="multipart/form-data",e.upload.form.action=jaxon.config.requestURI,e.upload.form.target=n,!0},_initialize:function(e){if(!e.upload)return!1;e.upload={id:e.upload,input:null,form:null,ajax:e.ajax};const n=jaxon.tools.dom.$(e.upload.id);if(!n)return console.log("Unable to find input field for file upload with id "+e.upload.id),!1;if("file"!==n.type)return console.log("The upload input field with id "+e.upload.id+" is not of type file"),!1;if(0===n.files.length)return console.log("There is no file selected for upload in input field with id "+e.upload.id),!1;if(void 0===n.name)return console.log("The upload input field with id "+e.upload.id+" has no name attribute"),!1;if(e.upload.input=n,e.upload.form=n.form,0!=e.upload.ajax)return!0;if(!n.form){let t=n;for(;null!==t&&"FORM"!==t.nodeName;)t=t.parentNode;if(null===t)return console.log("The upload input field with id "+e.upload.id+" is not in a form"),!1;e.upload.form=t}return jaxon.tools.upload.createIframe(e),!0},initialize:function(e){jaxon.tools.upload._initialize(e),e.upload&&e.upload.ajax&&e.upload.input||e.append("postHeaders",{"content-type":e.contentType})}},jaxon.cmd.delay={popAsyncRequest:function(e){return jaxon.tools.queue.empty(e)||"synchronous"===jaxon.tools.queue.peek(e).mode?null:jaxon.tools.queue.pop(e)},retry:function(e,n){let t=e.retries;if(t){if(--t,1>t)return!1}else t=n;return e.retries=t,e.requeue=!0,!0},setWakeup:function(e,n){null!==e.timeout&&(clearTimeout(e.timeout),e.timeout=null),e.timout=setTimeout((function(){jaxon.ajax.response.process(e)}),n)},confirmCallback:function(e,n,t){if(!0===t)for(;n>0&&e.response.count>1&&null!==jaxon.tools.queue.pop(e.response);)--n;!0===e.requeue?jaxon.cmd.delay.setWakeup(e.response,30):jaxon.ajax.response.process(e.response)},confirm:function(e,n,t){return e.requeue=!0,jaxon.ajax.message.confirm(t,"",(function(){jaxon.cmd.delay.confirmCallback(e,n,!1)}),(function(){jaxon.cmd.delay.confirmCallback(e,n,!0)})),e.requeue=!1,!1}},jaxon.cmd.event={setEvent:function(e){e.fullName="setEvent";const n=jaxon.tools.string.addOnPrefix(e.prop),t=jaxon.tools.string.doubleQuotes(e.data);return("string"==typeof e.id?jaxon.$(e.id):e.id)[n]=new Function("e",t),!0},addHandler:function(e){e.fullName="addHandler";const n=e.data,t=jaxon.cmd.event.getName(e.prop),o="string"==typeof e.id?jaxon.$(e.id):e.id;return jaxon.cmd.event._addHandler(o,t,n)},removeHandler:function(e){e.fullName="removeHandler";const n=e.data,t=jaxon.cmd.event.getName(e.prop),o="string"==typeof e.id?jaxon.$(e.id):e.id;return jaxon.cmd.event._removeHandler(o,t,n)}},window.addEventListener?(jaxon.cmd.event.getName=function(e){return jaxon.tools.string.stripOnPrefix(e)},jaxon.cmd.event._addHandler=function(e,n,t){return e.addEventListener(n,jaxon.tools.dom.findFunction(t),!1),!0},jaxon.cmd.event._removeHandler=function(e,n,t){return e.removeEventListener(n,jaxon.tools.dom.findFunction(t),!1),!0}):(jaxon.cmd.event.getName=function(e){return jaxon.tools.string.addOnPrefix(e)},jaxon.cmd.event._addHandler=function(e,n,t){return e.attachEvent(n,jaxon.tools.dom.findFunction(t)),!0},jaxon.cmd.event._removeHandler=function(e,n,t){return e.detachEvent(n,jaxon.tools.dom.findFunction(t)),!0}),jaxon.cmd.form={getInput:function(e,n,t){return void 0===window.addEventListener?jaxon.cmd.form.getInput=function(e,n,t){return jaxon.config.baseDocument.createElement('<input type="'+e+'" name="'+n+'" id="'+t+'">')}:jaxon.cmd.form.getInput=function(e,n,t){const o=jaxon.config.baseDocument.createElement("input");return o.setAttribute("type",e),o.setAttribute("name",n),o.setAttribute("id",t),o},jaxon.cmd.form.getInput(e,n,t)},createInput:function(e){e.fullName="createInput";const n="string"==typeof e.id?jaxon.$(e.id):e.id,t=e.type,o=e.data,a=e.prop,r=jaxon.cmd.form.getInput(t,o,a);return n&&r&&n.appendChild(r),!0},insertInput:function(e){e.fullName="insertInput";const n="string"==typeof e.id?jaxon.$(e.id):e.id,t=e.type,o=e.data,a=e.prop,r=jaxon.cmd.form.getInput(t,o,a);return r&&n&&n.parentNode&&n.parentNode.insertBefore(r,n),!0},insertInputAfter:function(e){e.fullName="insertInputAfter";const n="string"==typeof e.id?jaxon.$(e.id):e.id,t=e.type,o=e.data,a=e.prop,r=jaxon.cmd.form.getInput(t,o,a);return r&&n&&n.parentNode&&n.parentNode.insertBefore(r,n.nextSibling),!0}},jaxon.cmd.node={assign:function(e,n,t){if(e=jaxon.$(e),"innerHTML"===n)return e.innerHTML=t,!0;if("outerHTML"===n)return e.outerHTML=t,!0;const[o,a]=jaxon.tools.dom.getInnerObject(e,n);return!!o&&(o[a]=t,!0)},append:function(e,n,t){if(e=jaxon.$(e),"innerHTML"===n)return e.innerHTML=e.innerHTML+t,!0;if("outerHTML"===n)return e.outerHTML=e.outerHTML+t,!0;const[o,a]=jaxon.tools.dom.getInnerObject(e,n);return!!o&&(o[a]=o[a]+t,!0)},prepend:function(e,n,t){if(e=jaxon.$(e),"innerHTML"===n)return e.innerHTML=t+e.innerHTML,!0;if("outerHTML"===n)return e.outerHTML=t+e.outerHTML,!0;const[o,a]=jaxon.tools.dom.getInnerObject(e,n);return!!o&&(o[a]=t+o[a],!0)},replace:function(e,n,t){const o=t.r,a="innerHTML"===n?jaxon.tools.dom.getBrowserHTML(t.s):t.s;e=jaxon.$(e);const[r,s]=jaxon.tools.dom.getInnerObject(e,n);if(!r)return!1;let c=r[s],u=!1;"function"==typeof c&&(c=c.join(""),u=!0);let i=c.indexOf(a);if(i>-1){let t=[];for(;i>-1;){const e=i+a.length;t.push(c.substr(0,i)),t.push(o),c=c.substr(e,c.length-e),i=c.indexOf(a)}t.push(c),t=t.join(""),(u||jaxon.tools.dom.willChange(e,n,t))&&(r[s]=t)}return!0},remove:function(e){return(e=jaxon.$(e))&&e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e),!0},create:function(e,n,t){if(!(e=jaxon.$(e)))return!1;const o=jaxon.config.baseDocument.createElement(n);return o.setAttribute("id",t),e.appendChild(o),!0},insert:function(e,n,t){if(!(e=jaxon.$(e))||!e.parentNode)return!1;const o=jaxon.config.baseDocument.createElement(n);return o.setAttribute("id",t),e.parentNode.insertBefore(o,e),!0},insertAfter:function(e,n,t){if(!(e=jaxon.$(e))||!e.parentNode)return!1;const o=jaxon.config.baseDocument.createElement(n);return o.setAttribute("id",t),e.parentNode.insertBefore(o,e.nextSibling),!0},contextAssign:function(e){e.fullName="context assign";const[n,t]=jaxon.tools.dom.getInnerObject(this,e.prop);return!!n&&(n[t]=e.data,!0)},contextAppend:function(e){e.fullName="context append";const[n,t]=jaxon.tools.dom.getInnerObject(this,e.prop);return!!n&&(n[t]=n[t]+e.data,!0)},contextPrepend:function(e){e.fullName="context prepend";const[n,t]=jaxon.tools.dom.getInnerObject(this,e.prop);return!!n&&(n[t]=e.data+n[t],!0)}},jaxon.cmd.script={includeScriptOnce:function(e){e.fullName="includeScriptOnce";const n=e.data,t=jaxon.config.baseDocument.getElementsByTagName("script"),o=t.length;for(let e=0;e<o;++e){const o=t[e];if(o.src&&0<=o.src.indexOf(n))return!0}return jaxon.cmd.script.includeScript(e)},includeScript:function(e){e.fullName="includeScript";const n=jaxon.config.baseDocument,t=n.getElementsByTagName("head"),o=n.createElement("script");return o.src=e.data,void 0===e.type?o.type="text/javascript":o.type=e.type,void 0!==e.type&&o.setAttribute("id",e.elm_id),t[0].appendChild(o),!0},removeScript:function(e){e.fullName="removeScript";const n=e.data,t=e.unld,o=jaxon.config.baseDocument.getElementsByTagName("script"),a=o.length;for(let e=0;e<a;++e){const a=o[e];if(a.src&&0<=a.src.indexOf(n)){if(void 0!==t){const e={};e.data=t,e.context=window,jaxon.cmd.script.execute(e)}a.parentNode.removeChild(a)}}return!0},sleep:function(e){return e.fullName="sleep",!jaxon.cmd.delay.retry(e,e.prop)||(jaxon.cmd.delay.setWakeup(e.response,100),!1)},alert:function(e){return e.fullName="alert",jaxon.ajax.message.info(e.data),!0},confirm:function(e){return e.fullName="confirm",jaxon.cmd.delay.confirm(e,e.count,e.data),!1},execute:function(command){command.fullName="execute Javascript";let returnValue=!0;return command.context=command.context?command.context:{},command.context.jaxonDelegateCall=function(){eval(command.data)},command.context.jaxonDelegateCall(),returnValue},waitFor:function(command){command.fullName="waitFor";let bResult=!1;const cmdToEval="bResult = ("+command.data+");";try{command.context.jaxonDelegateCall=function(){eval(cmdToEval)},command.context.jaxonDelegateCall()}catch(e){}return 0!=bResult||!jaxon.cmd.delay.retry(command,command.prop)||(jaxon.cmd.delay.setWakeup(command.response,100),!1)},call:function(command){command.fullName="call js function";const parameters=command.data,code=[];if(code.push(command.func),code.push("("),void 0!==parameters&&"object"==typeof parameters){const e=parameters.length;if(0<e){code.push("parameters[0]");for(let n=1;n<e;++n)code.push(", parameters["+n+"]")}}return code.push(");"),command.context.jaxonDelegateCall=function(){eval(code.join(""))},command.context.jaxonDelegateCall(),!0},setFunction:function(command){command.fullName="setFunction";const code=new Array;if(code.push(command.func),code.push(" = function("),"object"==typeof command.prop){let e="";for(let n in command.prop)code.push(e),code.push(command.prop[n]),e=","}else code.push(command.prop);return code.push(") { "),code.push(command.data),code.push(" }"),command.context.jaxonDelegateCall=function(){eval(code.join(""))},command.context.jaxonDelegateCall(),!0},wrapFunction:function(command){command.fullName="wrapFunction";const code=new Array;return code.push(command.func),code.push(" = jaxon.cmd.script.makeWrapper("),code.push(command.func),code.push(", command.prop, command.data, command.type, command.context);"),command.context.jaxonDelegateCall=function(){eval(code.join(""))},command.context.jaxonDelegateCall(),!0},makeWrapper:function(origFun,args,codeBlocks,returnVariable,context){const originalCall=(returnVariable.length>0?returnVariable+" = ":"")+origFun+"("+args+"); ";let code="wrapper = function("+args+") { ";returnVariable.length>0&&(code+=" let "+returnVariable+" = null;");let separator="";const bLen=codeBlocks.length;for(let e=0;e<bLen;++e)code+=separator+codeBlocks[e],separator=originalCall;returnVariable.length>0&&(code+=" return "+returnVariable+";"),code+=" } ";let wrapper=null;return context.jaxonDelegateCall=function(){eval(code)},context.jaxonDelegateCall(),wrapper}},jaxon.cmd.style={add:function(e,n){const t=jaxon.config.baseDocument,o=t.getElementsByTagName("head")[0],a=o.getElementsByTagName("link");let r=!1;const s=a.length;for(let t=0;t<s&&0==r;++t)0<=a[t].href.indexOf(e)&&a[t].media==n&&(r=!0);if(0==r){const a=t.createElement("link");a.rel="stylesheet",a.type="text/css",a.href=e,a.media=n,o.appendChild(a)}return!0},remove:function(e,n){const t=jaxon.config.baseDocument.getElementsByTagName("head")[0],o=t.getElementsByTagName("link");let a=0;for(;a<o.length;)0<=o[a].href.indexOf(e)&&o[a].media==n?t.removeChild(o[a]):++a;return!0},waitForCSS:function(e){const n=jaxon.config.baseDocument.styleSheets,t=[];let o=n.length;for(let e=0;e<o;++e){t[e]=0;try{t[e]=n[e].cssRules.length}catch(o){try{t[e]=n[e].rules.length}catch(e){}}}let a=!0;o=t.length;for(let e=0;e<o;++e)0==t[e]&&(a=!1);return 0!=a||!jaxon.cmd.delay.retry(e,e.prop)||(jaxon.cmd.delay.setWakeup(e.response,10),!1)}},jaxon.cmd.tree={startResponse:function(e){jxnElm=[]},createElement:function(command){eval([command.tgt," = document.createElement(command.data)"].join(""))},setAttribute:function(command){command.context.jaxonDelegateCall=function(){eval([command.tgt,".setAttribute(command.key, command.data)"].join(""))},command.context.jaxonDelegateCall()},appendChild:function(command){command.context.jaxonDelegateCall=function(){eval([command.par,".appendChild(",command.data,")"].join(""))},command.context.jaxonDelegateCall()},insertBefore:function(command){command.context.jaxonDelegateCall=function(){eval([command.tgt,".parentNode.insertBefore(",command.data,", ",command.tgt,")"].join(""))},command.context.jaxonDelegateCall()},insertAfter:function(command){command.context.jaxonDelegateCall=function(){eval([command.tgt,"parentNode.insertBefore(",command.data,", ",command.tgt,".nextSibling)"].join(""))},command.context.jaxonDelegateCall()},appendText:function(command){command.context.jaxonDelegateCall=function(){eval([command.par,".appendChild(document.createTextNode(command.data))"].join(""))},command.context.jaxonDelegateCall()},removeChildren:function(command){let skip=command.skip||0,remove=command.remove||-1,element=null;command.context.jaxonDelegateCall=function(){eval(["element = ",command.data].join(""))},command.context.jaxonDelegateCall();const children=element.childNodes;for(let e in children)0==isNaN(e)&&1==children[e].nodeType&&(skip>0?skip-=1:0!=remove&&(remove>0&&(remove-=1),element.removeChild(children[e])))},endResponse:function(e){jxnElm=[]}},jaxon.ajax.callback={create:function(){const e=jaxon.config,n=jaxon.ajax.callback,t={timers:{}};return t.timers.onResponseDelay=n.setupTimer(arguments.length>0?arguments[0]:e.defaultResponseDelayTime),t.timers.onExpiration=n.setupTimer(arguments.length>1?arguments[1]:e.defaultExpirationTime),t.onPrepare=null,t.onRequest=null,t.onResponseDelay=null,t.onExpiration=null,t.beforeResponseProcessing=null,t.onFailure=null,t.onRedirect=null,t.onSuccess=null,t.onComplete=null,t},setupTimer:function(e){return{timer:null,delay:e}},clearTimer:function(e,n){if(void 0!==e.timers)void 0!==e.timers[n]&&clearTimeout(e.timers[n].timer);else for(let t=0;t<e.length;++t)jaxon.ajax.callback.clearTimer(e[t],n)},execute:function(e,n,t){if(void 0===e.timers){for(let o=0;o<e.length;++o)jaxon.ajax.callback.execute(e[o],n,t);return}if(void 0===e[n]||"function"!=typeof e[n])return;let o=e[n];void 0!==e.timers[n]?e.timers[n].timer=setTimeout((function(){o(t)}),e.timers[n].delay):o(t)}},jaxon.ajax.handler={handlers:[],execute:function(e){return!jaxon.ajax.handler.isRegistered(e)||(e.id&&(e.target=jaxon.$(e.id)),jaxon.ajax.handler.call(e))},register:function(e,n){jaxon.ajax.handler.handlers[e]=n},unregister:function(e){const n=jaxon.ajax.handler.handlers[e];return delete jaxon.ajax.handler.handlers[e],n},isRegistered:function(e){return!!jaxon.ajax.handler.handlers[e.cmd]},call:function(e){return jaxon.ajax.handler.handlers[e.cmd](e)}},jaxon.ajax.handler.register("rcmplt",(function(e){return jaxon.ajax.response.complete(e.request),!0})),jaxon.ajax.handler.register("css",(function(e){return e.fullName="includeCSS",void 0===e.media&&(e.media="screen"),jaxon.cmd.style.add(e.data,e.media)})),jaxon.ajax.handler.register("rcss",(function(e){return e.fullName="removeCSS",void 0===e.media&&(e.media="screen"),jaxon.cmd.style.remove(e.data,e.media)})),jaxon.ajax.handler.register("wcss",(function(e){return e.fullName="waitForCSS",jaxon.cmd.style.waitForCSS(e)})),jaxon.ajax.handler.register("as",(function(e){e.fullName="assign/clear";try{return jaxon.cmd.node.assign(e.target,e.prop,e.data)}catch(e){}return!0})),jaxon.ajax.handler.register("ap",(function(e){return e.fullName="append",jaxon.cmd.node.append(e.target,e.prop,e.data)})),jaxon.ajax.handler.register("pp",(function(e){return e.fullName="prepend",jaxon.cmd.node.prepend(e.target,e.prop,e.data)})),jaxon.ajax.handler.register("rp",(function(e){return e.fullName="replace",jaxon.cmd.node.replace(e.id,e.prop,e.data)})),jaxon.ajax.handler.register("rm",(function(e){return e.fullName="remove",jaxon.cmd.node.remove(e.id)})),jaxon.ajax.handler.register("ce",(function(e){return e.fullName="create",jaxon.cmd.node.create(e.id,e.data,e.prop)})),jaxon.ajax.handler.register("ie",(function(e){return e.fullName="insert",jaxon.cmd.node.insert(e.id,e.data,e.prop)})),jaxon.ajax.handler.register("ia",(function(e){return e.fullName="insertAfter",jaxon.cmd.node.insertAfter(e.id,e.data,e.prop)})),jaxon.ajax.handler.register("DSR",jaxon.cmd.tree.startResponse),jaxon.ajax.handler.register("DCE",jaxon.cmd.tree.createElement),jaxon.ajax.handler.register("DSA",jaxon.cmd.tree.setAttribute),jaxon.ajax.handler.register("DAC",jaxon.cmd.tree.appendChild),jaxon.ajax.handler.register("DIB",jaxon.cmd.tree.insertBefore),jaxon.ajax.handler.register("DIA",jaxon.cmd.tree.insertAfter),jaxon.ajax.handler.register("DAT",jaxon.cmd.tree.appendText),jaxon.ajax.handler.register("DRC",jaxon.cmd.tree.removeChildren),jaxon.ajax.handler.register("DER",jaxon.cmd.tree.endResponse),jaxon.ajax.handler.register("c:as",jaxon.cmd.node.contextAssign),jaxon.ajax.handler.register("c:ap",jaxon.cmd.node.contextAppend),jaxon.ajax.handler.register("c:pp",jaxon.cmd.node.contextPrepend),jaxon.ajax.handler.register("s",jaxon.cmd.script.sleep),jaxon.ajax.handler.register("ino",jaxon.cmd.script.includeScriptOnce),jaxon.ajax.handler.register("in",jaxon.cmd.script.includeScript),jaxon.ajax.handler.register("rjs",jaxon.cmd.script.removeScript),jaxon.ajax.handler.register("wf",jaxon.cmd.script.waitFor),jaxon.ajax.handler.register("js",jaxon.cmd.script.execute),jaxon.ajax.handler.register("jc",jaxon.cmd.script.call),jaxon.ajax.handler.register("sf",jaxon.cmd.script.setFunction),jaxon.ajax.handler.register("wpf",jaxon.cmd.script.wrapFunction),jaxon.ajax.handler.register("al",jaxon.cmd.script.alert),jaxon.ajax.handler.register("cc",jaxon.cmd.script.confirm),jaxon.ajax.handler.register("ci",jaxon.cmd.form.createInput),jaxon.ajax.handler.register("ii",jaxon.cmd.form.insertInput),jaxon.ajax.handler.register("iia",jaxon.cmd.form.insertInputAfter),jaxon.ajax.handler.register("ev",jaxon.cmd.event.setEvent),jaxon.ajax.handler.register("ah",jaxon.cmd.event.addHandler),jaxon.ajax.handler.register("rh",jaxon.cmd.event.removeHandler),jaxon.ajax.handler.register("dbg",(function(e){return e.fullName="debug message",console.log(e.data),!0})),jaxon.ajax.message={success:function(e,n){alert(e)},info:function(e,n){alert(e)},warning:function(e,n){alert(e)},error:function(e,n){alert(e)},confirm:function(e,n,t,o){confirm(e)?t():null!=o&&o()}},jaxon.ajax.parameters={bags:{},stringify:function(e){if(null==e)return"*";const n=typeof e;if("object"===n)try{return encodeURIComponent(JSON.stringify(e))}catch(n){e=""}return e=encodeURIComponent(e),"string"===n?"S"+e:"boolean"===n?"B"+e:"number"===n?"N"+e:e},toFormData:function(e){const n=new FormData;n.append("jxnr",e.dNow.getTime());const t=e.upload.input;for(const e of t.files)n.append(t.name,e);for(let t in e.functionName)n.append(t,encodeURIComponent(e.functionName[t]));if(e.parameters)for(const t of e.parameters)n.append("jxnargs[]",jaxon.ajax.parameters.stringify(t));if(e.bags){const t={};for(const n of e.bags)t[n]=jaxon.ajax.parameters.bags[n]?jaxon.ajax.parameters.bags[n]:"*";n.append("jxnbags",jaxon.ajax.parameters.stringify(t))}e.requestURI=e.URI,e.requestData=n},toUrlEncoded:function(e){const n=[];n.push("jxnr="+e.dNow.getTime());for(const t in e.functionName)n.push(t+"="+encodeURIComponent(e.functionName[t]));if(e.parameters)for(const t of e.parameters)n.push("jxnargs[]="+jaxon.ajax.parameters.stringify(t));if(e.bags){const t={};for(const n of e.bags)t[n]=jaxon.ajax.parameters.bags[n]?jaxon.ajax.parameters.bags[n]:"*";n.push("jxnbags="+jaxon.ajax.parameters.stringify(t))}e.requestURI=e.URI,"GET"===e.method&&(e.requestURI+=-1===e.requestURI.indexOf("?")?"?":"&",e.requestURI+=n.join("&"),n=[]),e.requestData=n.join("&")},process:function(e){const n=e.upload&&e.upload.ajax&&e.upload.input?jaxon.ajax.parameters.toFormData:jaxon.ajax.parameters.toUrlEncoded;e.dNow=new Date,n(e),delete e.dNow}},jaxon.ajax.request={initialize:function(e){const n=jaxon,t=n.config;e.append=function(e,n){void 0===this[e]&&(this[e]={});for(const t in n)void 0===this[e][t]&&(this[e][t]=n[t])},e.append("commonHeaders",t.commonHeaders),e.append("postHeaders",t.postHeaders),e.append("getHeaders",t.getHeaders),e.set=function(e,n){void 0===this[e]&&(this[e]=n)},e.set("statusMessages",t.statusMessages),e.set("waitCursor",t.waitCursor),e.set("mode",t.defaultMode),e.set("method",t.defaultMethod),e.set("URI",t.requestURI),e.set("httpVersion",t.defaultHttpVersion),e.set("contentType",t.defaultContentType),e.set("retry",t.defaultRetry),e.set("returnValue",t.defaultReturnValue),e.set("maxObjectDepth",t.maxObjectDepth),e.set("maxObjectSize",t.maxObjectSize),e.set("context",window),e.set("upload",!1),e.set("aborted",!1);const o=n.ajax.callback.create();if(o.take=function(e,n){void 0!==e[n]&&(o[n]=e[n],o.hasEvents=!0),delete e[n]},o.take(e,"onPrepare"),o.take(e,"onRequest"),o.take(e,"onResponseDelay"),o.take(e,"onExpiration"),o.take(e,"beforeResponseProcessing"),o.take(e,"onFailure"),o.take(e,"onRedirect"),o.take(e,"onSuccess"),o.take(e,"onComplete"),void 0!==e.callback?(void 0===e.callback.timers&&(e.callback.timers=[]),o.hasEvents&&(e.callback=[e.callback,o])):e.callback=o,e.status=e.statusMessages?t.status.update():t.status.dontUpdate(),e.cursor=e.waitCursor?t.cursor.update():t.cursor.dontUpdate(),e.method=e.method.toUpperCase(),"GET"!=e.method&&(e.method="POST"),e.requestRetry=e.retry,e.ajax=!!window.FormData,jaxon.tools.upload.initialize(e),delete e.append,delete e.set,delete o.take,void 0===e.URI)throw{code:10005}},prepare:function(e){const n=jaxon,t=n.tools,o=n.ajax.callback,a=n.callback,r=e.callback;if(o.execute([a,r],"onPrepare",e),!0===e.aborted)return!1;e.request=t.ajax.createRequest(),e.setRequestHeaders=function(e){if("object"==typeof e)for(let n in e)this.request.setRequestHeader(n,e[n])},e.setCommonRequestHeaders=function(){this.setRequestHeaders(this.commonHeaders)},e.setPostRequestHeaders=function(){this.setRequestHeaders(this.postHeaders)},e.setGetRequestHeaders=function(){this.setRequestHeaders(this.getHeaders)},e.request.onreadystatechange=function(){4===e.request.readyState&&(jaxon.tools.queue.empty(jaxon.cmd.delay.q.send)||"synchronous"==e.mode?jaxon.ajax.response.received(e):jaxon.tools.queue.push(jaxon.cmd.delay.q.recv,e))},e.finishRequest=function(){return this.returnValue},void 0!==e.userName&&void 0!==e.password?e.open=function(){this.request.open(this.method,this.requestURI,!0,e.userName,e.password)}:e.open=function(){this.request.open(this.method,this.requestURI,!0)},"POST"==e.method?e.applyRequestHeaders=function(){this.setCommonRequestHeaders();try{this.setPostRequestHeaders()}catch(e){throw this.method="GET",this.requestURI+=-1==this.requestURI.indexOf("?")?"?":"&",this.requestURI+=this.requestData,this.requestData="",0==this.requestRetry&&(this.requestRetry=1),e}}:e.applyRequestHeaders=function(){this.setCommonRequestHeaders(),this.setGetRequestHeaders()};let s=jaxon.tools.queue.empty(jaxon.cmd.delay.q.send);return"synchronous"===e.mode?(jaxon.tools.queue.push(jaxon.cmd.delay.q.send,e),jaxon.tools.queue.push(jaxon.cmd.delay.q.recv,e)):s||jaxon.tools.queue.push(jaxon.cmd.delay.q.send,e),s},submit:function(e){e.status.onRequest();const n=jaxon,t=n.ajax.callback,o=n.callback,a=e.callback;return t.execute([o,a],"onResponseDelay",e),t.execute([o,a],"onExpiration",e),t.execute([o,a],"onRequest",e),e.open(),e.applyRequestHeaders(),e.cursor.onWaiting(),e.status.onWaiting(),!1!==e.upload&&!e.upload.ajax&&e.upload.form?(e.upload.iframe.onload=function(){jaxon.ajax.response.upload(e)},e.upload.form.submit()):jaxon.ajax.request._send(e),e.finishRequest()},_send:function(e){e.request.send(e.requestData)},abort:function(e){e.aborted=!0,e.request.abort(),jaxon.ajax.response.complete(e)},execute:function(e,n){if(void 0===e)return!1;const t=n||{};t.functionName=e;const o=jaxon;for(o.ajax.request.initialize(t),o.ajax.parameters.process(t);t.requestRetry>0;)try{return o.ajax.request.prepare(t)?(--t.requestRetry,o.ajax.request.submit(t)):null}catch(e){if(jaxon.ajax.callback.execute([jaxon.callback,t.callback],"onFailure",t),0===t.requestRetry)throw e}}},jaxon.ajax.response={received:function(e){const n=jaxon,t=n.ajax.callback,o=n.callback,a=e.callback;if(e.aborted)return null;e.response=n.tools.queue.create(n.config.responseQueueSize),t.clearTimer([o,a],"onExpiration"),t.clearTimer([o,a],"onResponseDelay"),t.execute([o,a],"beforeResponseProcessing",e);const r=n.ajax.response.processor(e);return null==r?(t.execute([o,a],"onFailure",e),void n.ajax.response.complete(e)):r(e)},complete:function(e){if(jaxon.ajax.callback.execute([jaxon.callback,e.callback],"onComplete",e),e.cursor.onComplete(),e.status.onComplete(),delete e.functionName,delete e.requestURI,delete e.requestData,delete e.requestRetry,delete e.request,delete e.response,delete e.set,delete e.open,delete e.setRequestHeaders,delete e.setCommonRequestHeaders,delete e.setPostRequestHeaders,delete e.setGetRequestHeaders,delete e.applyRequestHeaders,delete e.finishRequest,delete e.status,delete e.cursor,"synchronous"==e.mode){let e=jaxon.tools.queue,n=jaxon.cmd.delay;for(e.pop(n.q.send),e.pop(n.q.recv);null!=(recvRequest=n.popAsyncRequest(n.q.recv));)jaxon.ajax.response.received(recvRequest);for(;null!=(nextRequest=n.popAsyncRequest(n.q.send));)jaxon.ajax.request.submit(nextRequest);null!=(nextRequest=e.peek(n.q.send))&&jaxon.ajax.request.submit(nextRequest)}},process:function(e){null!=e.timeout&&(clearTimeout(e.timeout),e.timeout=null);let n=null;for(;null!=(n=jaxon.tools.queue.pop(e));){try{if(0==jaxon.ajax.handler.execute(n))return 1==n.requeue?jaxon.tools.queue.pushFront(e,n):delete n,!1}catch(e){console.log(e)}delete n}return!0},processFragment:function(e,n,t,o){const r=jaxon.tools;for(nodeName in e)if("jxnobj"==nodeName)for(a in e[nodeName]){if(parseInt(a)!=a)continue;const t=e[nodeName][a];t.fullName="*unknown*",t.sequence=n,t.response=o.response,t.request=o,t.context=o.context,r.queue.push(o.response,t),++n}else if("jxnrv"==nodeName)t=e[nodeName];else{if("debugmsg"!=nodeName)throw{code:10004,data:command.fullName};txt=e[nodeName]}return t},processor:function(e){if(void 0!==e.responseProcessor)return e.responseProcessor;let n=e.request.getResponseHeader("content-type");if(!n)return null;let t="";if(0<=n.indexOf("application/json"))t=e.request.responseText;else if(0<=n.indexOf("text/html")){t=e.request.responseText;let n=t.indexOf('{"jxnobj"');if(n<0)return null;n>0&&(t=t.substr(n))}try{return e.request.responseJSON=JSON.parse(t),jaxon.ajax.response.json}catch(e){return null}},json:function(e){const n=jaxon,t=n.tools,o=n.ajax.callback,a=n.callback,r=e.callback;let s=e.returnValue;if(t.array.is_in(n.ajax.response.successCodes,e.request.status)){o.execute([a,r],"onSuccess",e);let c=0;"object"==typeof e.request.responseJSON&&"object"==typeof e.request.responseJSON.jxnobj&&(e.status.onProcessing(),s=n.ajax.response.processFragment(e.request.responseJSON,c,s,e));const u={fullName:"Response Complete"};u.sequence=c,u.request=e,u.context=e.context,u.cmd="rcmplt",t.queue.push(e.response,u),null==e.response.timeout&&n.ajax.response.process(e.response)}else t.array.is_in(n.ajax.response.redirectCodes,e.request.status)?(o.execute([a,r],"onRedirect",e),window.location=e.request.getResponseHeader("location"),n.ajax.response.complete(e)):t.array.is_in(n.ajax.response.errorsForAlert,e.request.status)&&(o.execute([a,r],"onFailure",e),n.ajax.response.complete(e));return s},upload:function(e){const n=jaxon,t=n.ajax.callback,o=n.callback,a=e.callback;let r=!1;const s=e.upload.iframe.contentWindow.res;if(s&&s.code?"error"===s.code&&(jaxon.ajax.message.error(s.msg),r=!0):(jaxon.ajax.message.error("The server returned an invalid response"),r=!0),r)return t.clearTimer([o,a],"onExpiration"),t.clearTimer([o,a],"onResponseDelay"),t.execute([o,a],"onFailure",e),void jaxon.ajax.response.complete(e);"success"===s.code&&(e.requestData+="&jxnupl="+encodeURIComponent(s.upl),jaxon.ajax.request._send(e))},successCodes:["0","200"],errorsForAlert:["400","401","402","403","404","500","501","502","503"],redirectCodes:["301","302","307"]},jaxon.dom={},function(e,n){"use strict";e=e||"docReady",n=n||window;let t=[],o=!1,a=!1;function r(){if(!o){o=!0;for(let e=0;e<t.length;e++)t[e].fn.call(window,t[e].ctx);t=[]}}function s(){"complete"===document.readyState&&r()}n[e]=function(e,n){o?setTimeout((function(){e(n)}),1):(t.push({fn:e,ctx:n}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(r,1):a||(document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):(document.attachEvent("onreadystatechange",s),window.attachEvent("onload",r)),a=!0))}}("ready",jaxon.dom),
/*
    @package jaxon
    @version $Id: jaxon.core.js 327 2007-02-28 16:55:26Z calltoconstruct $
    @copyright Copyright (c) 2005-2007 by Jared White & J. Max Wilson
    @copyright Copyright (c) 2008-2010 by Joseph Woolley, Steffen Konerow, Jared White  & J. Max Wilson
    @license http://www.jaxonproject.org/bsd_license.txt BSD License
*/
jaxon.callback=jaxon.ajax.callback.create(),jaxon.request=jaxon.ajax.request.execute,jaxon.register=jaxon.ajax.handler.register,jaxon.$=jaxon.tools.dom.$,jaxon.getFormValues=jaxon.tools.form.getValues,jaxon.msg=jaxon.ajax.message,jaxon.js=jaxon.cmd.script,jaxon.isLoaded=!0,jaxon.cmd.delay.q={send:jaxon.tools.queue.create(jaxon.config.requestQueueSize),recv:jaxon.tools.queue.create(2*jaxon.config.requestQueueSize)},jaxon.command={handler:{},handler:{register:jaxon.ajax.handler.register},create:function(e,n,t){return{cmd:"*",fullName:"* unknown command name *",sequence:e,request:n,context:t}}};const jxn={$:jaxon.tools.dom.$,getFormValues:jaxon.tools.form.getValues,request:jaxon.request};