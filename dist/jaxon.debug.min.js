/*
    @package jaxon
    @version $Id: jaxon.debug.js 327 2007-02-28 16:55:26Z calltoconstruct $
    @copyright Copyright (c) 2005-2007 by Jared White & J. Max Wilson
    @copyright Copyright (c) 2008-2009 by Joseph Woolley, Steffen Konerow, Jared White  & J. Max Wilson
    @license http://www.jaxonproject.org/bsd_license.txt BSD License
*/
try{if("undefined"==typeof jaxon)throw{name:"SequenceError",message:"Error: Jaxon core was not detected, debug module disabled."};void 0===jaxon.debug&&(jaxon.debug={})}catch(e){alert(e.name+": "+e.message)}jaxon.debug.workId="jaxonWork"+(new Date).getTime(),jaxon.debug.windowSource="about:blank",jaxon.debug.windowID="jaxon_debug_"+jaxon.debug.workId,void 0===jaxon.debug.windowStyle&&(jaxon.debug.windowStyle="width=800,height=600,scrollbars=yes,resizable=yes,status=yes"),void 0===jaxon.debug.windowTemplate&&(jaxon.debug.windowTemplate='<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><title>jaxon debug output</title><style type="text/css">/* <![CDATA[ */.debugEntry { margin: 3px; padding: 3px; border-top: 1px solid #999999; } .debugDate { font-weight: bold; margin: 2px; } .debugText { margin: 2px; } .warningText { margin: 2px; font-weight: bold; } .errorText { margin: 2px; font-weight: bold; color: #ff7777; }/* ]]> */</style></head><body><h2>jaxon debug output</h2><div id="debugTag"></div></body></html>'),jaxon.debug.getExceptionText=function(e){if(void 0!==e.code){if(void 0!==jaxon.debug.exceptions[e.code]){var a=jaxon.debug.exceptions[e.code];return void 0!==e.data&&a.replace("{data}",e.data),a}}else if(void 0!==e.name){a=e.name;return void 0!==e.message&&(a+=": ",a+=e.message),a}return"An unknown error has occurred."},jaxon.debug.writeMessage=function(e,a,o){try{var n=jaxon.debug;void 0!==n.window&&1!=n.window.closed||(n.window=window.open(n.windowSource,n.windowID,n.windowStyle),"about:blank"==n.windowSource&&n.window.document.write(n.windowTemplate));var r=n.window.document;void 0===a&&(a=""),void 0===o&&(o="debugText"),e=jaxon.debug.prepareDebugText(e);var t=r.getElementById("debugTag"),s=r.createElement("div"),x=r.createElement("span"),u=r.createElement("pre");x.innerHTML=(new Date).toString(),u.innerHTML=a+e,s.appendChild(x),s.appendChild(u),t.insertBefore(s,t.firstChild);try{s.className="debugEntry",x.className="debugDate",u.className=o}catch(e){}}catch(a){e.length>1e3&&(e=e.substr(0,1e3)+jaxon.debug.messages.heading),alert(jaxon.debug.messages.heading+e)}},jaxon.debug.prepareDebugText=function(e){try{return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />")}catch(a){jaxon.debug.stringReplace=function(e,a,o){var n=e.split(a);e="";for(var r=0;r<n.length;++r)0!=r&&(e+=o),e+=n[r];return e},jaxon.debug.prepareDebugText=function(e){return e=jaxon.debug.stringReplace(e,"&","&amp;"),e=jaxon.debug.stringReplace(e,"<","&lt;"),e=jaxon.debug.stringReplace(e,">","&gt;"),e=jaxon.debug.stringReplace(e,"\n","<br />")},jaxon.debug.prepareDebugText(e)}},jaxon.debug.executeCommand=jaxon.ajax.handler.execute,jaxon.ajax.handler.execute=function(e){try{if(void 0===e.cmd)throw{code:10006};if(0==jaxon.ajax.handler.isRegistered(e))throw{code:10007,data:e.cmd};return jaxon.debug.executeCommand(e)}catch(o){var a="jaxon.ajax.handler.execute (";void 0!==e.sequence&&(a+="#",a+=e.sequence,a+=", "),void 0!==e.cmdFullName&&(a+='"',a+=e.cmdFullName,a+='"'),a+="):\n",a+=jaxon.debug.getExceptionText(o),a+="\n",jaxon.debug.writeMessage(a,jaxon.debug.messages.error,"errorText")}return!0},jaxon.debug.commandHandler=jaxon.ajax.handler.unregister("dbg"),jaxon.ajax.handler.register("dbg",(function(e){return e.cmdFullName="debug message",jaxon.debug.writeMessage(e.data,jaxon.debug.messages.warning,"warningText"),jaxon.debug.commandHandler(e)})),jaxon.debug.$=jaxon.tools.dom.$,jaxon.tools.dom.$=function(e){try{var a=jaxon.debug.$(e);if("object"!=typeof a)throw{code:10008}}catch(e){var o="$:";o+=jaxon.debug.getExceptionText(e),o+="\n",jaxon.debug.writeMessage(o,jaxon.debug.messages.warning,"warningText")}return a},jaxon.debug._internalSend=jaxon.ajax.request._send,jaxon.ajax.request._send=function(e){try{var a=e.requestData.length||0;jaxon.debug.writeMessage(jaxon.debug.messages.request.sending),e.beginDate=new Date,jaxon.debug._internalSend(e),jaxon.debug.writeMessage(jaxon.debug.messages.request.sent.supplant({length:a}))}catch(e){var o="jaxon.ajax.request._send: ";throw o+=jaxon.debug.getExceptionText(e),o+="\n",jaxon.debug.writeMessage(o,jaxon.debug.messages.error,"errorText"),e}},jaxon.debug.submitRequest=jaxon.ajax.request.submit,jaxon.ajax.request.submit=function(e){var a=e.method;a+=": "+e.URI+"\n";var o=decodeURIComponent(e.requestData);a+=o=o.replace(new RegExp("&jxn","g"),"\n&jxn"),jaxon.debug.writeMessage(a),a=jaxon.debug.messages.request.calling;var n="\n";for(var r in e.functionName)a+=n,a+=r,a+=": ",a+=e.functionName[r],n="\n";jaxon.debug.writeMessage(a);try{return jaxon.debug.submitRequest(e)}catch(a){if(jaxon.debug.writeMessage(a.message),0<e.retry)throw a}},jaxon.debug.initializeRequest=jaxon.ajax.request.initialize,jaxon.ajax.request.initialize=function(e){try{var a=jaxon.debug.messages.request.init;return jaxon.debug.writeMessage(a),jaxon.debug.initializeRequest(e)}catch(e){a="jaxon.ajax.request.initialize: ";throw a+=jaxon.debug.getExceptionText(e),a+="\n",jaxon.debug.writeMessage(a,jaxon.debug.messages.error,"errorText"),e}},jaxon.debug.processParameters=jaxon.ajax.parameters.process,jaxon.ajax.parameters.process=function(e){try{if(void 0!==e.parameters){var a=jaxon.debug.messages.processing.parameters.supplant({count:e.parameters.length});jaxon.debug.writeMessage(a)}else{a=jaxon.debug.messages.processing.no_parameters;jaxon.debug.writeMessage(a)}return jaxon.debug.processParameters(e)}catch(e){a="jaxon.ajax.parameters.process: ";throw a+=jaxon.debug.getExceptionText(e),a+="\n",jaxon.debug.writeMessage(a,jaxon.debug.messages.error,"errorText"),e}},jaxon.debug.prepareRequest=jaxon.ajax.request.prepare,jaxon.ajax.request.prepare=function(e){try{var a=jaxon.debug.messages.request.preparing;return jaxon.debug.writeMessage(a),jaxon.debug.prepareRequest(e)}catch(e){a="jaxon.ajax.request.prepare: ";throw a+=jaxon.debug.getExceptionText(e),a+="\n",jaxon.debug.writeMessage(a,jaxon.debug.messages.error,"errorText"),e}},jaxon.debug.call=jaxon.ajax.handler.call,jaxon.ajax.handler.call=function(){try{var e=arguments.length;if(0==e)throw{code:10009};var a=arguments[0],o={};1<e&&(o=arguments[1]),o.debugging=!0;var n=jaxon.debug.call(a,o);return jaxon.debug.writeMessage(jaxon.debug.messages.processing.calling.supplant({cmd:a.fullName||a.cmd,options:JSON.stringify(o)})),n}catch(e){var r="jaxon.ajax.handler.call: ";throw r+=jaxon.debug.getExceptionText(e),r+="\n",jaxon.debug.writeMessage(r,jaxon.debug.messages.error,"errorText"),e}},jaxon.debug.request=jaxon.ajax.request.execute,jaxon.ajax.request.execute=function(){try{jaxon.debug.writeMessage(jaxon.debug.messages.request.starting);var e=arguments.length;if(0==e)throw{code:10010};var a=arguments[0],o={};return 1<e&&(o=arguments[1]),o.debugging=!0,jaxon.debug.request(a,o)}catch(e){var n="jaxon.ajax.request.execute: ";throw n+=jaxon.debug.getExceptionText(e),n+="\n",jaxon.debug.writeMessage(n,jaxon.debug.messages.error,"errorText"),e}},jaxon.debug.getResponseProcessor=jaxon.ajax.response.processor,jaxon.ajax.response.processor=function(e){try{var a=jaxon.debug.getResponseProcessor(e);if(void 0===a){var o=jaxon.debug.messages.response.no_processor;try{var n=e.request.getResponseHeader("content-type");o+="Content-Type: ",o+=n,"text/html"==n&&(o+=jaxon.debug.messages.response.check_errors)}catch(e){}jaxon.debug.writeMessage(o,jaxon.debug.messages.error,"errorText")}return a}catch(e){o="jaxon.ajax.response.processor: ";throw o+=jaxon.debug.getExceptionText(e),o+="\n",jaxon.debug.writeMessage(o,jaxon.debug.messages.error,"errorText"),e}},jaxon.debug.responseReceived=jaxon.ajax.response.received,jaxon.ajax.response.received=function(e){var a,o=jaxon,n=o.tools,r=o.debug;try{var t=e.request.status;if(n.array.is_in(o.ajax.response.successCodes,t)){var s=e.request.responseText;s=(s=(s=(s=(s=(s=s.replace(new RegExp("<cmd","g"),"\n<cmd")).replace(new RegExp("<jxn>","g"),"\n<jxn>")).replace(new RegExp("<jxnobj>","g"),"\n<jxnobj>")).replace(new RegExp("<e>","g"),"\n<e>")).replace(new RegExp("</jxnobj>","g"),"\n</jxnobj>\n")).replace(new RegExp("</jxn>","g"),"\n</jxn>"),e.midDate=new Date;var x=jaxon.debug.messages.response.success.supplant({status:t,length:s.length,duration:e.midDate-e.beginDate});x+=s,r.writeMessage(x)}else if(n.array.is_in(o.ajax.response.errorsForAlert,t)){x=jaxon.debug.messages.response.content.supplant({status:t,text:e.request.responseText});r.writeMessage(x,jaxon.debug.messages.error,"errorText")}else if(n.array.is_in(o.ajax.response.redirectCodes,t)){x=jaxon.debug.messages.response.redirect.supplant({location:e.request.getResponseHeader("location")});r.writeMessage(x)}a=r.responseReceived(e)}catch(e){x="jaxon.ajax.response.received: ";x+=jaxon.debug.getExceptionText(e),x+="\n",r.writeMessage(x,jaxon.debug.messages.error,"errorText")}return a},jaxon.debug.completeResponse=jaxon.ajax.response.complete,jaxon.ajax.response.complete=function(e){try{var a=jaxon.debug.completeResponse(e);e.endDate=new Date;var o=e.endDate-e.beginDate,n=jaxon.debug.messages.processing.done.supplant({duration:o});return jaxon.debug.writeMessage(n),a}catch(e){n="jaxon.ajax.response.complete: ";throw n+=jaxon.debug.getExceptionText(e),n+="\n",jaxon.debug.writeMessage(n,jaxon.debug.messages.error,"errorText"),e}},jaxon.debug.getRequestObject=jaxon.tools.ajax.createRequest,jaxon.tools.ajax.createRequest=function(){try{return jaxon.debug.writeMessage(jaxon.debug.messages.request.creating),jaxon.debug.getRequestObject()}catch(a){var e="jaxon.tools.ajax.createRequest: ";throw e+=jaxon.debug.getExceptionText(a),e+="\n",jaxon.debug.writeMessage(e,jaxon.debug.messages.error,"errorText"),a}},jaxon.dom.assign&&(jaxon.debug.assign=jaxon.dom.assign,jaxon.dom.assign=function(e,a,o){try{return jaxon.debug.assign(e,a,o)}catch(e){var n="jaxon.dom.assign: ";n+=jaxon.debug.getExceptionText(e),n+="\n",n+="Eval: element.",n+=a,n+=" = data;\n",jaxon.debug.writeMessage(n,jaxon.debug.messages.error,"errorText")}return!0}),jaxon.tools&&jaxon.tools.queue&&jaxon.tools.queue.retry&&(void 0===jaxon.debug.tools&&(jaxon.debug.tools={}),void 0===jaxon.debug.tools.queue&&(jaxon.debug.tools.queue={}),jaxon.debug.tools.queue.retry=jaxon.tools.queue.retry,jaxon.tools.queue.retry=function(e,a){return!!jaxon.debug.tools.queue.retry(e,a)||(e.cmd&&"s"==e.cmd||jaxon.debug.writeMessage("Retry count exceeded."),!1)}),jaxon.debug.isLoaded=!0,jxn={},jxn.$=jaxon.tools.dom.$,jxn.getFormValues=jaxon.tools.form.getValues,jxn.call=jaxon.ajax.handler.call,jxn.request=jaxon.ajax.request.execute,jaxon.$=jaxon.tools.dom.$,jaxon.dom.ready((function(){jaxon.debug.verbose.active&&(jaxon.debug.verbose.expandObject=function(e){var a=!0;if(1<arguments.length&&(a=arguments[1]),"function"==typeof e)return"[Function]";if("object"==typeof e){if(1==a){var o=" { ",n="";for(var r in e){o+=n,o+=r,o+=": ";try{o+=jaxon.debug.verbose.expandObject(e[r],!1)}catch(e){o+="[n/a]"}n=", "}return o+=" } "}return"[Object]"}return'"'+e+'"'},jaxon.debug.verbose.makeFunction=function(obj,name){return function(){var fun=name;fun+="(";for(var separator="",pLen=arguments.length,p=0;p<pLen;++p)fun+=separator,fun+=jaxon.debug.verbose.expandObject(arguments[p]),separator=",";fun+=");";var msg="--\x3e ";msg+=fun,jaxon.debug.writeMessage(msg);var returnValue=!0,code="returnValue = obj(";separator="";for(var p=0;p<pLen;++p)code+=separator,code+="arguments["+p+"]",separator=",";return code+=");",eval(code),msg="<-- ",msg+=fun,msg+=" returns ",msg+=jaxon.debug.verbose.expandObject(returnValue),jaxon.debug.writeMessage(msg),returnValue}},jaxon.debug.verbose.hook=function(e,a){for(var o in e)"function"==typeof e[o]&&(e[o]=jaxon.debug.verbose.makeFunction(e[o],a+o))},jaxon.debug.verbose.hook(jaxon,"jaxon."),jaxon.debug.verbose.hook(jaxon.dom.node,"jaxon.dom.node."),jaxon.debug.verbose.hook(jaxon.dom.tree,"jaxon.dom.tree."),jaxon.debug.verbose.hook(jaxon.dom.events,"jaxon.dom.events."),jaxon.debug.verbose.hook(jaxon.html.js,"jaxon.html.js."),jaxon.debug.verbose.hook(jaxon.html.css,"jaxon.html.css."),jaxon.debug.verbose.hook(jaxon.html.forms,"jaxon.html.forms."),jaxon.debug.verbose.hook(jaxon.tools.dom,"jaxon.tools.dom."),jaxon.debug.verbose.hook(jaxon.tools.array,"jaxon.tools.array."),jaxon.debug.verbose.hook(jaxon.tools.string,"jaxon.tools.string."),jaxon.debug.verbose.hook(jaxon.tools.ajax,"jaxon.tools.ajax."),jaxon.debug.verbose.hook(jaxon.tools.queue,"jaxon.tools.queue."),jaxon.debug.verbose.hook(jaxon.ajax.callback,"jaxon.ajax.callback."),jaxon.debug.verbose.hook(jaxon.ajax.handler,"jaxon.ajax.handler."))})),jaxon.debug.verbose.isLoaded=!0,jaxon.debug.verbose.active=!1;